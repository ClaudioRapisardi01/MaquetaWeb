{% extends "base.html" %}
{% block title %}{{ artista.nome_arte }}{% endblock %}
{% block content %}
<div class="d-flex justify-between align-center mb-3">
    <h1 style="font-size: 2rem; font-weight: 700;">{{ artista.nome_arte }}</h1>
    <div class="d-flex gap-1">
        {% if current_user.is_editor() or artista.creato_da == current_user.id %}
        <a href="{{ url_for('artisti.modifica', id=artista.id) }}" class="btn btn-warning"><i class="fas fa-edit"></i> Modifica</a>
        {% if current_user.is_editor() %}
        <a href="{{ url_for('artisti.elimina', id=artista.id) }}" class="btn btn-danger"><i class="fas fa-trash"></i> Elimina</a>
        {% endif %}
        {% endif %}
        <a href="{{ url_for('artisti.lista') }}" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Indietro</a>
    </div>
</div>
<div class="grid grid-3">
    <div class="card" style="grid-column: span 1;">
        {% if artista.foto %}
        <img src="{{ url_for('static', filename='uploads/images/' + artista.foto) }}" style="width: 100%; border-radius: 12px; margin-bottom: 1rem;">
        {% else %}
        <div style="width: 100%; height: 300px; background: linear-gradient(135deg, #6366f1, #8b5cf6); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
            <i class="fas fa-user-music" style="font-size: 6rem; color: white;"></i>
        </div>
        {% endif %}
        <h3>{{ artista.nome }}</h3>
        <p style="color: #64748b; margin-bottom: 1rem;">{{ artista.genere_musicale or 'Non specificato' }}</p>
        {% if artista.paese %}<p><i class="fas fa-globe"></i> {{ artista.paese }}</p>{% endif %}
        {% if artista.data_nascita %}<p><i class="fas fa-birthday-cake"></i> {{ artista.data_nascita.strftime('%d/%m/%Y') }}</p>{% endif %}
        <div style="margin-top: 1rem;">
            {% if artista.social_spotify %}<a href="{{ artista.social_spotify }}" target="_blank" class="btn btn-sm btn-success" style="margin: 0.25rem;"><i class="fab fa-spotify"></i></a>{% endif %}
            {% if artista.social_instagram %}<a href="{{ artista.social_instagram }}" target="_blank" class="btn btn-sm btn-primary" style="margin: 0.25rem;"><i class="fab fa-instagram"></i></a>{% endif %}
            {% if artista.social_facebook %}<a href="{{ artista.social_facebook }}" target="_blank" class="btn btn-sm btn-info" style="margin: 0.25rem;"><i class="fab fa-facebook"></i></a>{% endif %}
            {% if artista.social_twitter %}<a href="{{ artista.social_twitter }}" target="_blank" class="btn btn-sm btn-secondary" style="margin: 0.25rem;"><i class="fab fa-twitter"></i></a>{% endif %}
            {% if artista.sito_web %}<a href="{{ artista.sito_web }}" target="_blank" class="btn btn-sm btn-warning" style="margin: 0.25rem;"><i class="fas fa-globe"></i></a>{% endif %}
        </div>
    </div>
    <div style="grid-column: span 2;">
        <div class="card">
            <h2 style="font-size: 1.5rem; margin-bottom: 1rem;">Biografia</h2>
            <p style="line-height: 1.8;">{{ artista.biografia or 'Nessuna biografia disponibile.' }}</p>
        </div>
        <div class="card">
            <h2 style="font-size: 1.5rem; margin-bottom: 1rem;">Discografia</h2>
            <h3 style="font-size: 1.2rem; margin-bottom: 0.5rem;">Dischi</h3>
            {% if artista.dischi.all() %}
            <div class="item-list">
                {% for disco in artista.dischi %}
                <div class="item-card">
                    {% if disco.copertina %}
                    <img src="{{ url_for('static', filename='uploads/images/' + disco.copertina) }}" class="item-image">
                    {% else %}
                    <div class="item-image" style="display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #10b981, #059669);"><i class="fas fa-compact-disc" style="font-size: 2rem; color: white;"></i></div>
                    {% endif %}
                    <div class="item-details">
                        <div class="item-title">{{ disco.titolo }}</div>
                        <div class="item-meta">{{ disco.data_uscita.strftime('%Y') if disco.data_uscita else 'Data sconosciuta' }}</div>
                    </div>
                    <a href="{{ url_for('dischi.dettaglio', id=disco.id) }}" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p style="color: #64748b;">Nessun disco disponibile</p>
            {% endif %}
            <h3 style="font-size: 1.2rem; margin: 1rem 0 0.5rem;">Singoli</h3>
            {% if artista.singoli.all() %}
            <div class="item-list">
                {% for singolo in artista.singoli %}
                <div class="item-card">
                    {% if singolo.copertina %}
                    <img src="{{ url_for('static', filename='uploads/images/' + singolo.copertina) }}" class="item-image">
                    {% else %}
                    <div class="item-image" style="display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #f59e0b, #d97706);"><i class="fas fa-music" style="font-size: 2rem; color: white;"></i></div>
                    {% endif %}
                    <div class="item-details">
                        <div class="item-title">{{ singolo.titolo }}</div>
                        <div class="item-meta">{{ singolo.durata or 'Durata sconosciuta' }}</div>
                    </div>
                    <a href="{{ url_for('singoli.dettaglio', id=singolo.id) }}" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></a>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p style="color: #64748b;">Nessun singolo disponibile</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
