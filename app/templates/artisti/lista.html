{% extends "base.html" %}
{% from "_macros.html" import render_pagination %}
{% block title %}Artisti{% endblock %}
{% block content %}
<div class="d-flex justify-between align-center mb-3">
    <h1 style="font-size: 2rem; font-weight: 700;">Artisti</h1>
    {% if current_user.is_editor() %}
    <a href="{{ url_for('artisti.nuovo') }}" class="btn btn-primary"><i class="fas fa-plus"></i> Nuovo Artista</a>
    {% endif %}
</div>
<div class="grid grid-3">
    {% for artista in artisti.items %}
    <div class="card" style="padding: 0; overflow: hidden;">
        {% if artista.foto %}
        <img src="{{ url_for('static', filename='uploads/images/' + artista.foto) }}" style="width: 100%; height: 200px; object-fit: cover;">
        {% else %}
        <div style="width: 100%; height: 200px; background: linear-gradient(135deg, #6366f1, #8b5cf6); display: flex; align-items: center; justify-content: center;">
            <i class="fas fa-user-music" style="font-size: 4rem; color: white;"></i>
        </div>
        {% endif %}
        <div style="padding: 1.5rem;">
            <h3 style="margin-bottom: 0.5rem;">{{ artista.nome_arte }}</h3>
            <p style="color: #64748b; font-size: 0.875rem; margin-bottom: 1rem;">{{ artista.genere_musicale or 'Non specificato' }}</p>
            <div class="d-flex gap-1">
                <a href="{{ url_for('artisti.dettaglio', id=artista.id) }}" class="btn btn-sm btn-primary"><i class="fas fa-eye"></i> Vedi</a>
                {% if current_user.is_editor() or artista.creato_da == current_user.id %}
                <a href="{{ url_for('artisti.modifica', id=artista.id) }}" class="btn btn-sm btn-warning"><i class="fas fa-edit"></i></a>
                {% if current_user.is_editor() %}
                <a href="{{ url_for('artisti.elimina', id=artista.id) }}" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></a>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
    {% else %}
    <div class="card" style="grid-column: 1/-1; text-align: center; padding: 3rem;">
        <i class="fas fa-user-music" style="font-size: 4rem; color: #cbd5e1; margin-bottom: 1rem;"></i>
        <p style="color: #64748b;">Nessun artista trovato</p>
    </div>
    {% endfor %}
</div>
{{ render_pagination(artisti, 'artisti.lista') }}
{% endblock %}
