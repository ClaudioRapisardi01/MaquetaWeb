{% extends "base.html" %}
{% from "_macros.html" import render_pagination %}
{% block title %}Dischi{% endblock %}
{% block content %}
<div class="d-flex justify-between align-center mb-3">
    <h1 style="font-size: 2rem; font-weight: 700;">Dischi</h1>
    {% if current_user.is_editor() %}<a href="{{ url_for('dischi.nuovo') }}" class="btn btn-success"><i class="fas fa-plus"></i> Nuovo Disco</a>{% endif %}
</div>
<div class="grid grid-3">
    {% for disco in dischi.items %}
    <div class="card" style="padding: 0; overflow: hidden;">
        {% if disco.copertina %}
        <img src="{{ url_for('static', filename='uploads/images/' + disco.copertina) }}" style="width: 100%; height: 200px; object-fit: cover;">
        {% else %}
        <div style="width: 100%; height: 200px; background: linear-gradient(135deg, #10b981, #059669); display: flex; align-items: center; justify-content: center;"><i class="fas fa-compact-disc" style="font-size: 4rem; color: white;"></i></div>
        {% endif %}
        <div style="padding: 1.5rem;">
            <h3 style="margin-bottom: 0.5rem;">{{ disco.titolo }}</h3>
            <p style="color: #64748b; font-size: 0.875rem; margin-bottom: 1rem;">{{ disco.formato or 'Non specificato' }}</p>
            <div class="d-flex gap-1">
                <a href="{{ url_for('dischi.dettaglio', id=disco.id) }}" class="btn btn-sm btn-success"><i class="fas fa-eye"></i></a>
                {% if current_user.is_editor() or disco.creato_da == current_user.id %}
                <a href="{{ url_for('dischi.modifica', id=disco.id) }}" class="btn btn-sm btn-warning"><i class="fas fa-edit"></i></a>
                {% if current_user.is_editor() %}<a href="{{ url_for('dischi.elimina', id=disco.id) }}" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></a>{% endif %}
                {% endif %}
            </div>
        </div>
    </div>
    {% else %}
    <div class="card" style="grid-column: 1/-1; text-align: center; padding: 3rem;"><p style="color: #64748b;">Nessun disco trovato</p></div>
    {% endfor %}
</div>
{{ render_pagination(dischi, 'dischi.lista') }}
{% endblock %}
