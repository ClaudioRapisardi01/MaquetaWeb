<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionale Azienda</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #6366f1;
            --primary-light: #818cf8;
            --primary-dark: #4f46e5;
            --accent-color: #a78bfa;
            --bg-dark: #0f172a;
            --bg-darker: #020617;
            --card-bg: #1e293b;
            --sidebar-bg: #1e293b;
            --sidebar-hover: #334155;
            --text-light: #f1f5f9;
            --text-muted: #94a3b8;
            --text-dim: #64748b;
            --border-color: #334155;
            --shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 20px 50px -10px rgba(0, 0, 0, 0.5);
            --glow: 0 0 20px rgba(99, 102, 241, 0.3);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-darker);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(167, 139, 250, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(139, 92, 246, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(99, 102, 241, 0.03) 2px,
                rgba(99, 102, 241, 0.03) 4px
            );
            pointer-events: none;
            z-index: 0;
        }

        /* LOGIN PAGE */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        .login-container::before {
            content: '';
            position: absolute;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            top: -200px;
            right: -200px;
            pointer-events: none;
            animation: float 6s ease-in-out infinite;
        }

        .login-container::after {
            content: '';
            position: absolute;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(167, 139, 250, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            bottom: -150px;
            left: -150px;
            pointer-events: none;
            animation: float 8s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-30px); }
        }

        .login-box {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            padding: 50px 35px;
            border-radius: 20px;
            box-shadow: var(--shadow-lg), 0 0 0 1px rgba(99, 102, 241, 0.1);
            width: 100%;
            max-width: 420px;
            position: relative;
            z-index: 1;
            animation: slideUp 0.6s ease-out;
            overflow: hidden;
        }

        .login-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.05), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 200%; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .login-header {
            text-align: center;
            margin-bottom: 35px;
        }

        .login-header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            color: var(--text-light);
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .login-header p {
            color: var(--text-muted);
            font-size: 15px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            font-size: 14px;
            color: var(--text-light);
        }

        .form-group {
            position: relative;
        }

        .form-group input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(15, 23, 42, 0.5);
            border: 1.5px solid var(--border-color);
            border-radius: 12px;
            font-size: 15px;
            color: var(--text-light);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(15, 23, 42, 0.8);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1), 0 8px 16px -4px rgba(99, 102, 241, 0.2);
            transform: translateY(-2px);
        }

        .form-group input::placeholder {
            color: var(--text-dim);
        }

        .btn-login {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: var(--text-light);
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            margin-top: 10px;
        }

        .btn-login::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.5);
        }

        .btn-login:hover::before {
            left: 100%;
        }

        .btn-login:active {
            transform: translateY(0);
        }

        /* DASHBOARD */
        .dashboard {
            display: none;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        .dashboard.active {
            display: flex;
            animation: dashboardFadeIn 0.5s ease-out;
        }

        @keyframes dashboardFadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* SIDEBAR */
        .sidebar {
            position: fixed;
            left: -280px;
            top: 0;
            width: 280px;
            height: 100vh;
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--border-color);
            transition: left 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1000;
            overflow-y: auto;
            overflow-x: hidden;
            box-shadow: var(--shadow-lg);
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 1px;
            height: 100%;
            background: linear-gradient(180deg,
                transparent 0%,
                var(--primary-color) 20%,
                var(--accent-color) 50%,
                var(--primary-color) 80%,
                transparent 100%
            );
            opacity: 0.3;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: transparent;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--sidebar-hover);
            border-radius: 10px;
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-header {
            padding: 28px 24px;
            border-bottom: 1px solid var(--border-color);
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, transparent 100%);
        }

        .sidebar-header h2 {
            color: var(--text-light);
            font-size: 22px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .sidebar-menu {
            padding: 16px 12px;
        }

        .menu-item {
            padding: 14px 16px;
            margin: 4px 0;
            color: var(--text-muted);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 14px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border-radius: 12px;
            position: relative;
            font-size: 15px;
            font-weight: 500;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 0;
            background: linear-gradient(180deg, var(--primary-color), var(--accent-color));
            border-radius: 0 3px 3px 0;
            transition: height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px var(--primary-color);
        }

        .menu-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .menu-item:hover {
            background-color: var(--sidebar-hover);
            color: var(--text-light);
            transform: translateX(6px);
            padding-left: 20px;
        }

        .menu-item:hover::before {
            height: 70%;
        }

        .menu-item:hover::after {
            left: 100%;
        }

        .menu-item:hover .menu-icon {
            transform: scale(1.15) rotate(5deg);
        }

        .menu-item.active {
            background: linear-gradient(90deg, rgba(99, 102, 241, 0.25) 0%, rgba(99, 102, 241, 0.08) 100%);
            color: var(--primary-light);
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .menu-item.active::before {
            height: 80%;
            box-shadow: 0 0 15px var(--primary-color);
        }

        .menu-item.active .menu-icon {
            filter: drop-shadow(0 0 8px var(--primary-color));
        }

        .menu-icon {
            width: 22px;
            height: 22px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* MAIN CONTENT */
        .main-content {
            flex: 1;
            transition: margin-left 0.4s ease;
        }

        .topbar {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            height: 70px;
            display: flex;
            align-items: center;
            padding: 0 24px;
            box-shadow: var(--shadow), inset 0 -1px 0 rgba(99, 102, 241, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .topbar.scrolled {
            box-shadow: var(--shadow-lg), inset 0 -1px 0 rgba(99, 102, 241, 0.2);
            background: rgba(30, 41, 59, 0.95);
        }

        .menu-toggle {
            background: var(--sidebar-hover);
            border: none;
            cursor: pointer;
            padding: 10px;
            margin-right: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .menu-toggle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(99, 102, 241, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .menu-toggle:hover {
            background: var(--primary-color);
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);
            transform: scale(1.05);
        }

        .menu-toggle:hover::before {
            width: 100px;
            height: 100px;
        }

        .menu-toggle:active {
            transform: scale(0.95);
        }

        .hamburger {
            width: 24px;
            height: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .hamburger span {
            width: 100%;
            height: 2.5px;
            background-color: var(--text-light);
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .topbar-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-light);
            flex: 1;
            letter-spacing: -0.5px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 8px 12px;
            background: var(--sidebar-hover);
            border-radius: 12px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .user-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .user-info:hover {
            background: var(--primary-color);
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);
            transform: translateY(-2px);
        }

        .user-info:hover::before {
            left: 100%;
        }

        .user-info:hover .user-avatar {
            transform: scale(1.1) rotate(5deg);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3), inset 0 -2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .user-avatar::after {
            content: '';
            position: absolute;
            top: -2px;
            right: -2px;
            width: 12px;
            height: 12px;
            background: #10b981;
            border: 2px solid var(--sidebar-hover);
            border-radius: 50%;
            box-shadow: 0 0 10px #10b981;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(0.9);
            }
        }

        .content-area {
            padding: 32px 24px;
            min-height: calc(100vh - 70px);
        }

        .welcome-message {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            padding: 60px 32px;
            border-radius: 20px;
            box-shadow: var(--shadow-lg), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.8s ease-out;
            transition: all 0.4s ease;
        }

        .welcome-message:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg), 0 20px 40px -10px rgba(99, 102, 241, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border-color: rgba(99, 102, 241, 0.3);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .welcome-message::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background:
                radial-gradient(circle at 30% 50%, rgba(99, 102, 241, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 70% 50%, rgba(167, 139, 250, 0.15) 0%, transparent 25%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }


        .welcome-message h2 {
            font-size: 32px;
            margin-bottom: 12px;
            color: var(--text-light);
            font-weight: 700;
            position: relative;
            z-index: 1;
            animation: titleFloat 3s ease-in-out infinite;
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        .welcome-message p {
            color: var(--text-muted);
            font-size: 16px;
            position: relative;
            z-index: 1;
            animation: subtitleFloat 3s ease-in-out infinite 0.2s;
        }

        @keyframes subtitleFloat {
            0%, 100% { transform: translateY(0px); opacity: 0.8; }
            50% { transform: translateY(-3px); opacity: 1; }
        }

        /* OVERLAY */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .overlay.active {
            display: block;
            opacity: 1;
        }

        /* VIEW MANAGEMENT */
        .view-content {
            display: none;
            animation: fadeInView 0.4s ease-out;
        }

        .view-content.active {
            display: block;
        }

        @keyframes fadeInView {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* PAGE HEADER */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-light);
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: var(--text-muted);
            font-size: 15px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        /* BUTTONS */
        .btn {
            padding: 12px 20px;
            border-radius: 10px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: var(--text-light);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: var(--sidebar-hover);
            color: var(--text-light);
        }

        .btn-secondary:hover {
            background: var(--border-color);
            transform: translateY(-2px);
        }

        .btn-sm {
            padding: 8px 14px;
            font-size: 13px;
        }

        .btn-icon {
            background: transparent;
            border: none;
            font-size: 16px;
            cursor: pointer;
            padding: 6px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .btn-icon:hover {
            background: var(--sidebar-hover);
        }

        /* FILTERS BAR */
        .filters-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-icon {
            position: absolute;
            left: 14px;
            font-size: 16px;
            pointer-events: none;
        }

        .search-box input {
            width: 100%;
            padding: 12px 14px 12px 42px;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(30, 41, 59, 0.8);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .filter-select {
            padding: 12px 16px;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(30, 41, 59, 0.8);
        }

        /* CARD */
        .card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        /* TABLE */
        .table-container {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table thead {
            background: rgba(15, 23, 42, 0.5);
            border-bottom: 1px solid var(--border-color);
        }

        .data-table th {
            padding: 16px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-table td {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-light);
            font-size: 14px;
        }

        .data-table tbody tr {
            transition: background 0.2s ease;
        }

        .data-table tbody tr:hover {
            background: rgba(99, 102, 241, 0.05);
        }

        .user-cell {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar-small {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }

        .user-name {
            font-weight: 500;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-admin {
            background: rgba(99, 102, 241, 0.2);
            color: var(--primary-light);
        }

        .badge-editor {
            background: rgba(167, 139, 250, 0.2);
            color: var(--accent-color);
        }

        .badge-viewer {
            background: rgba(148, 163, 184, 0.2);
            color: var(--text-muted);
        }

        .badge-active {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .badge-inactive {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            position: relative;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            animation: modalSlideIn 0.3s ease-out;
        }

        .modal-large {
            max-width: 800px;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-light);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--sidebar-hover);
            color: var(--text-light);
        }

        .modal-body {
            padding: 24px;
            overflow-y: auto;
            flex: 1;
        }

        .modal-footer {
            padding: 24px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* FORM */
        .form-field {
            margin-bottom: 20px;
        }

        .form-field label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
            color: var(--text-light);
        }

        .form-field input,
        .form-field select {
            width: 100%;
            padding: 12px 14px;
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-field input:focus,
        .form-field select:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(15, 23, 42, 0.8);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        /* ROLES MANAGEMENT */
        .roles-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 24px;
            height: 500px;
        }

        .roles-list {
            border-right: 1px solid var(--border-color);
            padding-right: 24px;
            overflow-y: auto;
        }

        .roles-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .roles-list-header h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-light);
        }

        .role-item {
            padding: 14px;
            border-radius: 10px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .role-item:hover {
            background: var(--sidebar-hover);
        }

        .role-item.active {
            background: rgba(99, 102, 241, 0.2);
            border: 1px solid var(--primary-color);
        }

        .role-info {
            flex: 1;
        }

        .role-name {
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 4px;
        }

        .role-users {
            font-size: 12px;
            color: var(--text-muted);
        }

        .permissions-panel {
            overflow-y: auto;
        }

        .permissions-panel h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 16px;
        }

        .permissions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }

        .permission-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .permission-item:hover {
            background: var(--sidebar-hover);
        }

        .permission-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .permission-item span {
            font-size: 14px;
            color: var(--text-light);
        }

        /* SERVICES GRID */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        .service-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .service-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .service-card-header {
            padding: 24px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(167, 139, 250, 0.15) 100%);
            border-bottom: 1px solid var(--border-color);
        }

        .service-category-badge {
            display: inline-block;
            padding: 4px 12px;
            background: var(--primary-color);
            color: var(--text-light);
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 12px;
        }

        .service-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-light);
            margin-bottom: 8px;
        }

        .service-short-desc {
            font-size: 14px;
            color: var(--text-muted);
            line-height: 1.5;
        }

        .service-card-body {
            padding: 20px 24px;
            flex: 1;
        }

        .service-description {
            font-size: 14px;
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .service-meta {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        .service-meta-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .service-meta-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .service-meta-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-light);
        }

        .service-price {
            color: var(--primary-light);
            font-size: 20px;
        }

        .service-card-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .service-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 500;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        .status-dot.active {
            background: #10b981;
            box-shadow: 0 0 10px #10b981;
        }

        .status-dot.inactive {
            background: #64748b;
        }

        .service-actions {
            display: flex;
            gap: 8px;
        }

        .service-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px 12px 0 0;
        }

        .service-image-upload {
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .service-image-upload:hover {
            border-color: var(--primary-color);
            background: rgba(99, 102, 241, 0.05);
        }

        .service-image-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .service-image-preview {
            position: relative;
            width: 100%;
        }

        .service-image-preview img {
            width: 100%;
            height: auto;
            max-height: 300px;
            object-fit: cover;
            border-radius: 8px;
        }

        .btn-remove-image {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(239, 68, 68, 0.9);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
        }

        .btn-remove-image:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        /* ARTISTS & ALBUMS */
        .artists-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        .artist-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .artist-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .artist-card-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .artist-card-body {
            padding: 20px;
        }

        .artist-card-name {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-light);
            margin-bottom: 8px;
        }

        .artist-card-genre {
            font-size: 13px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .artist-card-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
        }

        .artist-detail-header {
            display: flex;
            gap: 32px;
            padding: 32px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%);
            border-radius: 16px;
            margin-bottom: 32px;
        }

        .artist-detail-image {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 50%;
            border: 4px solid var(--primary-color);
        }

        .artist-detail-info {
            flex: 1;
        }

        .artist-detail-name {
            font-size: 36px;
            font-weight: 700;
            color: var(--text-light);
            margin-bottom: 8px;
        }

        .artist-detail-genre {
            font-size: 16px;
            color: var(--primary-light);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 16px;
        }

        .artist-detail-bio {
            font-size: 15px;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .section-header {
            margin: 32px 0 24px 0;
        }

        .section-header h2 {
            font-size: 24px;
            color: var(--text-light);
            font-weight: 700;
        }

        .albums-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
        }

        .album-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .album-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .album-cover {
            width: 100%;
            height: 280px;
            object-fit: cover;
        }

        .album-body {
            padding: 20px;
        }

        .album-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-light);
            margin-bottom: 4px;
        }

        .album-year {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 16px;
        }

        .album-tracks {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        .track-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(51, 65, 85, 0.5);
        }

        .track-item:last-child {
            border-bottom: none;
        }

        .track-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .track-number {
            font-size: 12px;
            color: var(--text-muted);
            min-width: 24px;
        }

        .track-title {
            font-size: 14px;
            color: var(--text-light);
        }

        .track-duration {
            font-size: 13px;
            color: var(--text-muted);
        }

        .track-actions {
            display: flex;
            gap: 4px;
        }

        .album-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .btn-add-track {
            width: 100%;
            padding: 10px;
            background: var(--sidebar-hover);
            border: 1px dashed var(--border-color);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-add-track:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        /* POSTS & STAFF */
        .posts-grid, .staff-grid {display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 24px; margin-top: 24px;}
        .post-card, .staff-card {background: rgba(30, 41, 59, 0.5); backdrop-filter: blur(10px); border: 1px solid var(--border-color); border-radius: 16px; overflow: hidden; transition: all 0.3s ease;}
        .post-card:hover, .staff-card:hover {transform: translateY(-4px); box-shadow: var(--shadow-lg);}
        .post-card-image, .staff-card-image {width: 100%; height: 200px; object-fit: cover;}
        .post-card-body, .staff-card-body {padding: 20px;}
        .post-title, .staff-name {font-size: 18px; font-weight: 700; color: var(--text-light); margin-bottom: 8px;}
        .post-excerpt {font-size: 14px; color: var(--text-muted); line-height: 1.5; margin-bottom: 12px;}
        .post-meta {display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: var(--text-muted);}
        .post-actions, .staff-actions {display: flex; gap: 8px; margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-color);}
        .staff-role {font-size: 14px; color: var(--primary-light); margin-bottom: 4px;}
        .staff-dept {font-size: 13px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;}

        /* DOCUMENTS GRID */
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .document-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .document-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .document-icon-container {
            height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%);
            position: relative;
        }

        .document-icon {
            font-size: 64px;
        }

        .document-type-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 10px;
            background: var(--primary-color);
            color: var(--text-light);
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .document-card-body {
            padding: 16px;
        }

        .document-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 6px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .document-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 12px;
            color: var(--text-muted);
        }

        .document-owner {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .document-owner-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
        }

        .document-size {
            color: var(--text-dim);
        }

        .document-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
        }

        .document-actions button {
            flex: 1;
            padding: 8px;
            background: var(--sidebar-hover);
            border: none;
            border-radius: 8px;
            color: var(--text-light);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .document-actions button:hover {
            background: var(--primary-color);
        }

        /* FILE UPLOAD */
        .file-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 32px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(99, 102, 241, 0.05);
        }

        .file-upload-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .upload-icon {
            font-size: 48px;
        }

        .file-upload-placeholder p {
            color: var(--text-light);
            font-weight: 500;
            margin: 0;
        }

        .file-hint {
            color: var(--text-muted);
            font-size: 13px;
        }

        .file-selected {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 8px;
        }

        .file-name {
            color: var(--text-light);
            font-weight: 500;
        }

        .btn-remove-file {
            background: var(--sidebar-hover);
            border: none;
            color: var(--text-light);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .btn-remove-file:hover {
            background: #ef4444;
        }

        /* DOCUMENT PREVIEW */
        .document-preview-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .document-info-section {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 16px;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 12px;
        }

        .info-row {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .info-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            color: var(--text-light);
            font-size: 14px;
        }

        .document-description {
            padding: 16px;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 12px;
        }

        .document-description h4 {
            color: var(--text-light);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .document-description p {
            color: var(--text-muted);
            font-size: 14px;
            line-height: 1.6;
        }

        .preview-content-area {
            min-height: 400px;
            border-radius: 12px;
            overflow: hidden;
        }

        .preview-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 32px;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 12px;
            border: 2px dashed var(--border-color);
            min-height: 400px;
        }

        .preview-icon {
            font-size: 72px;
            margin-bottom: 16px;
        }

        .preview-placeholder p {
            color: var(--text-muted);
            font-size: 14px;
        }

        .preview-content-area img {
            width: 100%;
            height: auto;
            border-radius: 12px;
            display: block;
        }

        .preview-content-area video {
            width: 100%;
            max-height: 600px;
            border-radius: 12px;
            background: #000;
        }

        .preview-content-area audio {
            width: 100%;
            border-radius: 12px;
        }

        .preview-content-area iframe {
            width: 100%;
            height: 600px;
            border: none;
            border-radius: 12px;
            background: #fff;
        }

        .preview-pdf-container {
            background: rgba(15, 23, 42, 0.3);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .preview-pdf-container iframe {
            background: #fff;
            box-shadow: var(--shadow-lg);
        }

        .preview-audio-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 32px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%);
            border-radius: 12px;
            gap: 24px;
        }

        .audio-icon-large {
            font-size: 96px;
        }

        .preview-text-container {
            background: rgba(15, 23, 42, 0.3);
            padding: 24px;
            border-radius: 12px;
            max-height: 600px;
            overflow-y: auto;
        }

        .preview-text-container pre {
            color: var(--text-light);
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin: 0;
        }

        /* EMPTY STATE */
        .empty-state {
            text-align: center;
            padding: 60px 32px;
            background: rgba(30, 41, 59, 0.3);
            border-radius: 16px;
            border: 2px dashed var(--border-color);
        }

        .empty-icon {
            font-size: 72px;
            margin-bottom: 16px;
        }

        .empty-state h3 {
            color: var(--text-light);
            font-size: 20px;
            margin-bottom: 8px;
        }

        .empty-state p {
            color: var(--text-muted);
            font-size: 14px;
        }

        /* MOBILE USER CARD */
        .user-card-mobile {
            display: none;
        }

        .user-card-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 12px;
        }

        .user-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.2s ease;
            flex: 1;
        }

        .user-card-header:hover {
            background: rgba(99, 102, 241, 0.05);
        }

        .user-card-meta {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-card-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease, margin 0.3s ease;
            padding: 0;
            margin: 0;
        }

        .user-card-details.expanded {
            max-height: 200px;
            padding: 12px;
            margin-top: 12px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 8px;
        }

        .user-card-detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .user-card-detail-row:last-child {
            border-bottom: none;
        }

        .user-card-detail-label {
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            font-size: 11px;
            letter-spacing: 0.5px;
        }

        .user-card-detail-value {
            color: var(--text-light);
            font-size: 14px;
            text-align: right;
        }

        /* RESPONSIVE */
        @media (max-width: 767px) {
            /* Hide desktop table, show mobile cards */
            .data-table thead {
                display: none;
            }

            .data-table tbody tr {
                display: block;
                margin-bottom: 12px;
                background: rgba(15, 23, 42, 0.3);
                border-radius: 12px;
                padding: 12px;
                border-bottom: none;
            }

            .data-table tbody tr:hover {
                background: rgba(15, 23, 42, 0.5);
            }

            .data-table td {
                display: none;
            }

            /* Show only first column (user card mobile) */
            .data-table td {
                display: none !important;
            }

            .data-table td:first-child {
                display: block !important;
                padding: 0;
                border: none;
            }

            /* Show only mobile card structure */
            .user-card-mobile {
                display: block;
            }

            /* Hide desktop user cell in mobile */
            .data-table td:first-child .user-cell {
                display: none;
            }

            /* Reset table row padding */
            .data-table tbody tr {
                padding: 16px;
            }

            .action-buttons {
                gap: 6px;
            }

            .btn-icon {
                padding: 6px 8px;
                font-size: 16px;
            }

            /* Artists/Albums grid responsive */
            .artists-grid, .albums-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .artist-detail-header {
                flex-direction: column;
                text-align: center;
                padding: 24px;
            }

            .artist-detail-image {
                align-self: center;
            }

            /* Services grid responsive */
            .services-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            /* Documents grid responsive */
            .documents-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .document-info-section {
                grid-template-columns: 1fr;
            }

            /* Form responsive */
            .form-row {
                grid-template-columns: 1fr;
            }

            /* Roles modal responsive */
            .roles-container {
                grid-template-columns: 1fr;
                height: auto;
            }

            .roles-list {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                padding-right: 0;
                padding-bottom: 16px;
                margin-bottom: 16px;
                max-height: 200px;
            }

            .permissions-grid {
                grid-template-columns: 1fr;
            }

            /* Page header responsive */
            .page-header {
                flex-direction: column;
                align-items: stretch;
            }

            .header-actions {
                width: 100%;
            }

            .header-actions .btn {
                flex: 1;
            }

            /* Filters responsive */
            .filters-bar {
                flex-direction: column;
            }

            .search-box {
                width: 100%;
                min-width: auto;
            }

            .filter-select {
                width: 100%;
            }
        }

        @media (min-width: 768px) {
            .sidebar {
                left: 0;
            }

            .main-content {
                margin-left: 280px;
            }

            .overlay {
                display: none !important;
            }

            .menu-toggle {
                display: none;
            }

            /* Add data-label for mobile view */
            .data-table td[data-label]::before {
                display: none;
            }
        }

        @media (min-width: 1024px) {
            .content-area {
                padding: 32px 40px;
            }

            .login-box {
                padding: 50px 40px;
            }
        }

        /* UTILITY */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>

    <!-- LOGIN PAGE -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <h1>Gestionale Azienda</h1>
                <p>Accedi al tuo account</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn-login">Accedi</button>
            </form>
        </div>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboardPage" class="dashboard">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h2>Menu</h2>
            </div>
            <nav class="sidebar-menu">
                <a href="#" class="menu-item active">
                    <span class="menu-icon"></span>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="menu-item">
                    <span class="menu-icon"></span>
                    <span>Utenti</span>
                </a>
                <a href="#" class="menu-item">
                    <span class="menu-icon"></span>
                    <span>Documenti</span>
                </a>
                <a href="#" class="menu-item">
                    <span class="menu-icon"></span>
                    <span>Servizi</span>
                </a>
                <a href="#" class="menu-item">
                    <span class="menu-icon"></span>
                    <span>Artisti</span>
                </a>
                <a href="#" class="menu-item">
                    <span class="menu-icon"></span>
                    <span>Post</span>
                </a>
                <a href="#" class="menu-item">
                    <span class="menu-icon"></span>
                    <span>Staff</span>
                </a>
                <a href="#" class="menu-item">
                    <span class="menu-icon"></span>
                    <span>Notifiche</span>
                </a>
                <a href="#" class="menu-item" id="logoutBtn">
                    <span class="menu-icon"></span>
                    <span>Logout</span>
                </a>
            </nav>
        </aside>

        <!-- Overlay for mobile -->
        <div id="overlay" class="overlay"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Topbar -->
            <header class="topbar">
                <button class="menu-toggle" id="menuToggle">
                    <div class="hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
                <h1 class="topbar-title">Dashboard</h1>
                <div class="user-info">
                    <div class="user-avatar">U</div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard View -->
                <div id="dashboardView" class="view-content active">
                    <div class="welcome-message">
                        <h2>Benvenuto nel gestionale Maqueta</h2>
                        <p>La dashboard  pronta per essere personalizzata</p>
                    </div>
                </div>

                <!-- Documenti View -->
                <div id="documentiView" class="view-content">
                    <!-- Header con azioni -->
                    <div class="page-header">
                        <div>
                            <h2 class="page-title">Gestione Documenti</h2>
                            <p class="page-subtitle">Carica e gestisci i tuoi documenti</p>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-secondary" id="btnMieiDocumenti">
                                <span></span>
                                I Miei Documenti
                            </button>
                            <button class="btn btn-secondary" id="btnTuttiDocumenti">
                                <span></span>
                                Tutti i Documenti
                            </button>
                            <button class="btn btn-primary" id="btnCaricaDocumento">
                                <span></span>
                                Carica Documento
                            </button>
                        </div>
                    </div>

                    <!-- Filtri e ricerca -->
                    <div class="filters-bar">
                        <div class="search-box">
                            <span class="search-icon"></span>
                            <input type="text" id="searchDocuments" placeholder="Cerca documenti...">
                        </div>
                        <select class="filter-select" id="filterDocType">
                            <option value="">Tutti i tipi</option>
                            <option value="pdf">PDF</option>
                            <option value="doc">Word</option>
                            <option value="xls">Excel</option>
                            <option value="img">Immagini</option>
                            <option value="other">Altri</option>
                        </select>
                        <select class="filter-select" id="filterDocOwner">
                            <option value="">Tutti gli utenti</option>
                            <option value="me">I miei</option>
                        </select>
                    </div>

                    <!-- Grid documenti -->
                    <div id="documentsGrid" class="documents-grid">
                        <!-- Populated by JS -->
                    </div>

                    <!-- Empty state -->
                    <div id="emptyDocuments" class="empty-state" style="display: none;">
                        <div class="empty-icon"></div>
                        <h3>Nessun documento trovato</h3>
                        <p>Carica il tuo primo documento per iniziare</p>
                    </div>
                </div>

                <!-- Artisti View -->
                <div id="artistiView" class="view-content">
                    <!-- Lista Artisti -->
                    <div id="artistiListView">
                        <div class="page-header">
                            <div>
                                <h2 class="page-title">Gestione Artisti</h2>
                                <p class="page-subtitle">Gestisci gli artisti e la loro discografia</p>
                            </div>
                            <div class="header-actions">
                                <button class="btn btn-primary" id="btnNuovoArtista">
                                    <span></span>
                                    Nuovo Artista
                                </button>
                            </div>
                        </div>

                        <!-- Filtri e ricerca -->
                        <div class="filters-bar">
                            <div class="search-box">
                                <span class="search-icon"></span>
                                <input type="text" id="searchArtists" placeholder="Cerca artisti...">
                            </div>
                            <select class="filter-select" id="filterArtistGenre">
                                <option value="">Tutti i generi</option>
                                <option value="pop">Pop</option>
                                <option value="rock">Rock</option>
                                <option value="jazz">Jazz</option>
                                <option value="electronic">Electronic</option>
                                <option value="hiphop">Hip Hop</option>
                                <option value="classical">Classical</option>
                            </select>
                        </div>

                        <!-- Grid artisti -->
                        <div id="artistsGrid" class="artists-grid">
                            <!-- Populated by JS -->
                        </div>

                        <!-- Empty state -->
                        <div id="emptyArtists" class="empty-state" style="display: none;">
                            <div class="empty-icon"></div>
                            <h3>Nessun artista trovato</h3>
                            <p>Aggiungi il tuo primo artista per iniziare</p>
                        </div>
                    </div>

                    <!-- Dettaglio Artista -->
                    <div id="artistDetailView" style="display: none;">
                        <div class="page-header">
                            <button class="btn btn-secondary" id="btnBackToArtists">
                                <span></span>
                                Torna agli artisti
                            </button>
                            <div class="header-actions">
                                <button class="btn btn-secondary" id="btnEditArtist">
                                    <span></span>
                                    Modifica Artista
                                </button>
                                <button class="btn btn-primary" id="btnNuovoAlbum">
                                    <span></span>
                                    Nuovo Album
                                </button>
                            </div>
                        </div>

                        <!-- Artist info -->
                        <div class="artist-detail-header">
                            <img id="artistDetailImage" src="" alt="" class="artist-detail-image">
                            <div class="artist-detail-info">
                                <h1 id="artistDetailName" class="artist-detail-name"></h1>
                                <p id="artistDetailGenre" class="artist-detail-genre"></p>
                                <p id="artistDetailBio" class="artist-detail-bio"></p>
                            </div>
                        </div>

                        <!-- Albums grid -->
                        <div class="section-header">
                            <h2>Discografia</h2>
                        </div>
                        <div id="albumsGrid" class="albums-grid">
                            <!-- Populated by JS -->
                        </div>

                        <!-- Empty state albums -->
                        <div id="emptyAlbums" class="empty-state" style="display: none;">
                            <div class="empty-icon"></div>
                            <h3>Nessun album trovato</h3>
                            <p>Aggiungi il primo album per questo artista</p>
                        </div>
                    </div>
                </div>

                <!-- Servizi View -->
                <div id="serviziView" class="view-content">
                    <!-- Header con azioni -->
                    <div class="page-header">
                        <div>
                            <h2 class="page-title">Gestione Servizi</h2>
                            <p class="page-subtitle">Gestisci i servizi offerti dalla tua azienda</p>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-primary" id="btnNuovoServizio">
                                <span></span>
                                Nuovo Servizio
                            </button>
                        </div>
                    </div>

                    <!-- Filtri e ricerca -->
                    <div class="filters-bar">
                        <div class="search-box">
                            <span class="search-icon"></span>
                            <input type="text" id="searchServices" placeholder="Cerca servizi...">
                        </div>
                        <select class="filter-select" id="filterServiceCategory">
                            <option value="">Tutte le categorie</option>
                            <option value="consulenza">Consulenza</option>
                            <option value="sviluppo">Sviluppo</option>
                            <option value="design">Design</option>
                            <option value="marketing">Marketing</option>
                            <option value="supporto">Supporto</option>
                        </select>
                        <select class="filter-select" id="filterServiceStatus">
                            <option value="">Tutti gli stati</option>
                            <option value="active">Attivo</option>
                            <option value="inactive">Inattivo</option>
                        </select>
                    </div>

                    <!-- Grid servizi -->
                    <div id="servicesGrid" class="services-grid">
                        <!-- Populated by JS -->
                    </div>

                    <!-- Empty state -->
                    <div id="emptyServices" class="empty-state" style="display: none;">
                        <div class="empty-icon"></div>
                        <h3>Nessun servizio trovato</h3>
                        <p>Crea il tuo primo servizio per iniziare</p>
                    </div>
                </div>

                <!-- Post View -->
                <div id="postView" class="view-content">
                    <div class="page-header">
                        <div><h2 class="page-title">Gestione Post</h2><p class="page-subtitle">Gestisci i post del blog</p></div>
                        <div class="header-actions"><button class="btn btn-primary" id="btnNuovoPost"><span></span> Nuovo Post</button></div>
                    </div>
                    <div class="filters-bar">
                        <div class="search-box"><span class="search-icon"></span><input type="text" id="searchPosts" placeholder="Cerca post..."></div>
                        <select class="filter-select" id="filterPostStatus"><option value="">Tutti gli stati</option><option value="published">Pubblicato</option><option value="draft">Bozza</option></select>
                    </div>
                    <div id="postsGrid" class="posts-grid"></div>
                    <div id="emptyPosts" class="empty-state" style="display: none;"><div class="empty-icon"></div><h3>Nessun post trovato</h3><p>Crea il tuo primo post</p></div>
                </div>

                <!-- Staff View -->
                <div id="staffView" class="view-content">
                    <div class="page-header">
                        <div><h2 class="page-title">Gestione Staff</h2><p class="page-subtitle">Gestisci il team aziendale</p></div>
                        <div class="header-actions"><button class="btn btn-primary" id="btnNuovoStaff"><span></span> Nuovo Membro</button></div>
                    </div>
                    <div class="filters-bar">
                        <div class="search-box"><span class="search-icon"></span><input type="text" id="searchStaff" placeholder="Cerca membri..."></div>
                        <select class="filter-select" id="filterStaffDept"><option value="">Tutti i dipartimenti</option><option value="management">Management</option><option value="development">Development</option><option value="design">Design</option><option value="marketing">Marketing</option><option value="sales">Sales</option></select>
                    </div>
                    <div id="staffGrid" class="staff-grid"></div>
                    <div id="emptyStaff" class="empty-state" style="display: none;"><div class="empty-icon"></div><h3>Nessun membro trovato</h3><p>Aggiungi il primo membro del team</p></div>
                </div>

                <!-- Utenti View -->
                <div id="utentiView" class="view-content">
                    <!-- Header con azioni -->
                    <div class="page-header">
                        <div>
                            <h2 class="page-title">Gestione Utenti</h2>
                            <p class="page-subtitle">Gestisci utenti e permessi del sistema</p>
                        </div>
                        <div class="header-actions">
                            <button class="btn btn-secondary" id="btnGestisciRuoli">
                                <span></span>
                                Gestisci Ruoli
                            </button>
                            <button class="btn btn-primary" id="btnNuovoUtente">
                                <span></span>
                                Nuovo Utente
                            </button>
                        </div>
                    </div>

                    <!-- Filtri e ricerca -->
                    <div class="filters-bar">
                        <div class="search-box">
                            <span class="search-icon"></span>
                            <input type="text" id="searchUsers" placeholder="Cerca utenti...">
                        </div>
                        <select class="filter-select" id="filterRole">
                            <option value="">Tutti i ruoli</option>
                            <option value="admin">Admin</option>
                            <option value="editor">Editor</option>
                            <option value="viewer">Viewer</option>
                        </select>
                        <select class="filter-select" id="filterStatus">
                            <option value="">Tutti gli stati</option>
                            <option value="active">Attivo</option>
                            <option value="inactive">Inattivo</option>
                        </select>
                    </div>

                    <!-- Tabella utenti -->
                    <div class="card">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Utente</th>
                                        <th>Email</th>
                                        <th>Ruolo</th>
                                        <th>Stato</th>
                                        <th>Ultimo accesso</th>
                                        <th>Azioni</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Carica Documento -->
            <div id="modalCaricaDocumento" class="modal">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Carica Documento</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="formCaricaDocumento">
                            <div class="form-field">
                                <label>Nome Documento</label>
                                <input type="text" name="docName" required>
                            </div>
                            <div class="form-field">
                                <label>Descrizione</label>
                                <input type="text" name="docDescription" placeholder="Breve descrizione (opzionale)">
                            </div>
                            <div class="form-field">
                                <label>Categoria</label>
                                <select name="docCategory" required>
                                    <option value="">Seleziona categoria</option>
                                    <option value="contratti">Contratti</option>
                                    <option value="fatture">Fatture</option>
                                    <option value="report">Report</option>
                                    <option value="presentazioni">Presentazioni</option>
                                    <option value="altro">Altro</option>
                                </select>
                            </div>
                            <div class="form-field">
                                <label>File</label>
                                <div class="file-upload-area" id="fileUploadArea">
                                    <input type="file" id="fileInput" name="file" style="display: none;">
                                    <div class="file-upload-placeholder">
                                        <span class="upload-icon"></span>
                                        <p>Clicca per selezionare un file</p>
                                        <span class="file-hint">Qualsiasi tipo di file (PDF, Documenti, Immagini, Video, Audio, etc.)</span>
                                    </div>
                                    <div class="file-selected" style="display: none;">
                                        <span class="file-name"></span>
                                        <button type="button" class="btn-remove-file"></button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" id="btnAnnullaDocumento">Annulla</button>
                        <button class="btn btn-primary" id="btnSalvaDocumento">Carica</button>
                    </div>
                </div>
            </div>

            <!-- Modal Preview Documento -->
            <div id="modalPreviewDocumento" class="modal">
                <div class="modal-overlay"></div>
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h3 id="previewDocTitle">Anteprima Documento</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="document-preview-container">
                            <div class="document-info-section">
                                <div class="info-row">
                                    <span class="info-label">Proprietario:</span>
                                    <span class="info-value" id="previewOwner"></span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Categoria:</span>
                                    <span class="info-value" id="previewCategory"></span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Tipo:</span>
                                    <span class="info-value" id="previewType"></span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Dimensione:</span>
                                    <span class="info-value" id="previewSize"></span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Caricato:</span>
                                    <span class="info-value" id="previewDate"></span>
                                </div>
                            </div>
                            <div class="document-description">
                                <h4>Descrizione</h4>
                                <p id="previewDescription"></p>
                            </div>
                            <div class="preview-content-area" id="previewContentArea">
                                <div class="preview-placeholder" id="previewPlaceholder">
                                    <span class="preview-icon" id="previewIcon"></span>
                                    <p>Anteprima non disponibile</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" id="btnChiudiPreview">Chiudi</button>
                        <button class="btn btn-secondary" id="btnScaricaDoc">
                            <span></span>
                            Scarica
                        </button>
                        <button class="btn btn-primary" id="btnModificaDoc" style="display: none;">
                            <span></span>
                            Modifica
                        </button>
                        <button class="btn btn-primary" id="btnEliminaDoc" style="display: none;">
                            <span></span>
                            Elimina
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal Nuovo Utente -->
            <div id="modalNuovoUtente" class="modal">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Nuovo Utente</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="formNuovoUtente">
                            <div class="form-row">
                                <div class="form-field">
                                    <label>Nome</label>
                                    <input type="text" name="firstName" required>
                                </div>
                                <div class="form-field">
                                    <label>Cognome</label>
                                    <input type="text" name="lastName" required>
                                </div>
                            </div>
                            <div class="form-field">
                                <label>Email</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-field">
                                <label>Password</label>
                                <input type="password" name="password" required>
                            </div>
                            <div class="form-row">
                                <div class="form-field">
                                    <label>Ruolo</label>
                                    <select name="role" required>
                                        <option value="">Seleziona ruolo</option>
                                        <option value="admin">Admin</option>
                                        <option value="editor">Editor</option>
                                        <option value="viewer">Viewer</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label>Stato</label>
                                    <select name="status" required>
                                        <option value="active">Attivo</option>
                                        <option value="inactive">Inattivo</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" id="btnCancellaUtente">Annulla</button>
                        <button class="btn btn-primary" id="btnSalvaUtente">Salva Utente</button>
                    </div>
                </div>
            </div>

            <!-- Modal Gestisci Ruoli -->
            <div id="modalGestisciRuoli" class="modal">
                <div class="modal-overlay"></div>
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h3>Gestisci Ruoli</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="roles-container">
                            <div class="roles-list">
                                <div class="roles-list-header">
                                    <h4>Ruoli disponibili</h4>
                                    <button class="btn btn-sm btn-primary" id="btnNuovoRuolo">+ Nuovo Ruolo</button>
                                </div>
                                <div class="role-item active" data-role="admin">
                                    <div class="role-info">
                                        <div class="role-name">Admin</div>
                                        <div class="role-users">5 utenti</div>
                                    </div>
                                    <button class="btn-icon"></button>
                                </div>
                                <div class="role-item" data-role="editor">
                                    <div class="role-info">
                                        <div class="role-name">Editor</div>
                                        <div class="role-users">12 utenti</div>
                                    </div>
                                    <button class="btn-icon"></button>
                                </div>
                                <div class="role-item" data-role="viewer">
                                    <div class="role-info">
                                        <div class="role-name">Viewer</div>
                                        <div class="role-users">28 utenti</div>
                                    </div>
                                    <button class="btn-icon"></button>
                                </div>
                            </div>
                            <div class="permissions-panel">
                                <h4>Permessi del ruolo</h4>
                                <div class="permissions-grid">
                                    <label class="permission-item">
                                        <input type="checkbox" checked>
                                        <span>Visualizza Dashboard</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" checked>
                                        <span>Gestisci Utenti</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" checked>
                                        <span>Gestisci Documenti</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox">
                                        <span>Gestisci Servizi</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox">
                                        <span>Gestisci Artisti</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" checked>
                                        <span>Gestisci Post</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox">
                                        <span>Gestisci Staff</span>
                                    </label>
                                    <label class="permission-item">
                                        <input type="checkbox" checked>
                                        <span>Visualizza Notifiche</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" id="btnChiudiRuoli">Chiudi</button>
                        <button class="btn btn-primary">Salva Modifiche</button>
                    </div>
                </div>
            </div>

            <!-- Modal Nuovo/Modifica Servizio -->
            <div id="modalServizio" class="modal">
                <div class="modal-overlay"></div>
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h3 id="modalServizioTitle">Nuovo Servizio</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="formServizio">
                            <div class="form-row">
                                <div class="form-field">
                                    <label>Nome Servizio</label>
                                    <input type="text" name="serviceName" required>
                                </div>
                                <div class="form-field">
                                    <label>Categoria</label>
                                    <select name="serviceCategory" required>
                                        <option value="">Seleziona categoria</option>
                                        <option value="consulenza">Consulenza</option>
                                        <option value="sviluppo">Sviluppo</option>
                                        <option value="design">Design</option>
                                        <option value="marketing">Marketing</option>
                                        <option value="supporto">Supporto</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-field">
                                <label>Descrizione Breve</label>
                                <input type="text" name="serviceShortDesc" placeholder="Una breve descrizione del servizio">
                            </div>
                            <div class="form-field">
                                <label>Descrizione Completa</label>
                                <textarea name="serviceDescription" rows="4" style="width: 100%; padding: 12px 14px; background: rgba(15, 23, 42, 0.5); border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-light); font-size: 14px; font-family: inherit; resize: vertical;"></textarea>
                            </div>
                            <div class="form-field">
                                <label>Immagine</label>
                                <div class="service-image-upload" id="serviceImageUpload">
                                    <input type="file" id="serviceImageInput" accept="image/*" style="display: none;">
                                    <div class="service-image-placeholder" id="serviceImagePlaceholder">
                                        <span class="upload-icon"></span>
                                        <p>Clicca per selezionare un'immagine</p>
                                        <span class="file-hint">JPG, PNG, GIF (max 5MB)</span>
                                    </div>
                                    <div class="service-image-preview" id="serviceImagePreview" style="display: none;">
                                        <img id="serviceImagePreviewImg" src="" alt="Preview">
                                        <button type="button" class="btn-remove-image" id="btnRemoveServiceImage"></button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-field">
                                    <label>Prezzo ()</label>
                                    <input type="number" name="servicePrice" step="0.01" min="0" required>
                                </div>
                                <div class="form-field">
                                    <label>Durata</label>
                                    <input type="text" name="serviceDuration" placeholder="es. 1 settimana, 2 mesi">
                                </div>
                            </div>
                            <div class="form-field">
                                <label>Stato</label>
                                <select name="serviceStatus" required>
                                    <option value="active">Attivo</option>
                                    <option value="inactive">Inattivo</option>
                                </select>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" id="btnAnnullaServizio">Annulla</button>
                        <button class="btn btn-primary" id="btnSalvaServizio">Salva</button>
                    </div>
                </div>
            </div>

            <!-- Modals Artisti/Album/Tracce -->
            <div id="modalArtista" class="modal"><div class="modal-overlay"></div><div class="modal-content modal-large"><div class="modal-header"><h3 id="modalArtistaTitle">Nuovo Artista</h3><button class="modal-close">&times;</button></div><div class="modal-body"><form id="formArtista"><div class="form-field"><label>Nome Artista</label><input type="text" name="artistName" required></div><div class="form-field"><label>Genere</label><select name="artistGenre" required><option value="">Seleziona genere</option><option value="pop">Pop</option><option value="rock">Rock</option><option value="jazz">Jazz</option><option value="electronic">Electronic</option><option value="hiphop">Hip Hop</option><option value="classical">Classical</option></select></div><div class="form-field"><label>Biografia</label><textarea name="artistBio" rows="3" style="width: 100%; padding: 12px 14px; background: rgba(15, 23, 42, 0.5); border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-light); font-size: 14px; font-family: inherit; resize: vertical;"></textarea></div><div class="form-field"><label>Immagine</label><div class="service-image-upload" id="artistImageUpload"><input type="file" id="artistImageInput" accept="image/*" style="display: none;"><div class="service-image-placeholder" id="artistImagePlaceholder"><span class="upload-icon"></span><p>Clicca per selezionare un'immagine</p></div><div class="service-image-preview" id="artistImagePreview" style="display: none;"><img id="artistImagePreviewImg" src="" alt="Preview"><button type="button" class="btn-remove-image" id="btnRemoveArtistImage"></button></div></div></div></form></div><div class="modal-footer"><button class="btn btn-secondary" id="btnAnnullaArtista">Annulla</button><button class="btn btn-primary" id="btnSalvaArtista">Salva</button></div></div></div>

            <div id="modalAlbum" class="modal"><div class="modal-overlay"></div><div class="modal-content modal-large"><div class="modal-header"><h3 id="modalAlbumTitle">Nuovo Album</h3><button class="modal-close">&times;</button></div><div class="modal-body"><form id="formAlbum"><div class="form-row"><div class="form-field"><label>Titolo Album</label><input type="text" name="albumTitle" required></div><div class="form-field"><label>Anno</label><input type="number" name="albumYear" min="1900" max="2100" required></div></div><div class="form-field"><label>Cover Album</label><div class="service-image-upload" id="albumImageUpload"><input type="file" id="albumImageInput" accept="image/*" style="display: none;"><div class="service-image-placeholder" id="albumImagePlaceholder"><span class="upload-icon"></span><p>Clicca per selezionare una cover</p></div><div class="service-image-preview" id="albumImagePreview" style="display: none;"><img id="albumImagePreviewImg" src="" alt="Preview"><button type="button" class="btn-remove-image" id="btnRemoveAlbumImage"></button></div></div></div></form></div><div class="modal-footer"><button class="btn btn-secondary" id="btnAnnullaAlbum">Annulla</button><button class="btn btn-primary" id="btnSalvaAlbum">Salva</button></div></div></div>

            <div id="modalTraccia" class="modal"><div class="modal-overlay"></div><div class="modal-content"><div class="modal-header"><h3 id="modalTracciaTitle">Nuova Traccia</h3><button class="modal-close">&times;</button></div><div class="modal-body"><form id="formTraccia"><div class="form-field"><label>Titolo Traccia</label><input type="text" name="trackTitle" required></div><div class="form-row"><div class="form-field"><label>Durata (mm:ss)</label><input type="text" name="trackDuration" placeholder="3:45" required></div><div class="form-field"><label>Numero Traccia</label><input type="number" name="trackNumber" min="1" required></div></div></form></div><div class="modal-footer"><button class="btn btn-secondary" id="btnAnnullaTraccia">Annulla</button><button class="btn btn-primary" id="btnSalvaTraccia">Salva</button></div></div></div>

            <div id="modalPost" class="modal"><div class="modal-overlay"></div><div class="modal-content modal-large"><div class="modal-header"><h3 id="modalPostTitle">Nuovo Post</h3><button class="modal-close">&times;</button></div><div class="modal-body"><form id="formPost"><div class="form-field"><label>Titolo</label><input type="text" name="postTitle" required></div><div class="form-field"><label>Contenuto</label><textarea name="postContent" rows="6" style="width: 100%; padding: 12px 14px; background: rgba(15, 23, 42, 0.5); border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-light); font-size: 14px; font-family: inherit; resize: vertical;" required></textarea></div><div class="form-row"><div class="form-field"><label>Categoria</label><input type="text" name="postCategory" placeholder="es. News, Tutorial"></div><div class="form-field"><label>Stato</label><select name="postStatus" required><option value="draft">Bozza</option><option value="published">Pubblicato</option></select></div></div><div class="form-field"><label>Immagine Cover</label><div class="service-image-upload" id="postImageUpload"><input type="file" id="postImageInput" accept="image/*" style="display: none;"><div class="service-image-placeholder" id="postImagePlaceholder"><span class="upload-icon"></span><p>Seleziona immagine cover</p></div><div class="service-image-preview" id="postImagePreview" style="display: none;"><img id="postImagePreviewImg" src="" alt="Preview"><button type="button" class="btn-remove-image" id="btnRemovePostImage"></button></div></div></div></form></div><div class="modal-footer"><button class="btn btn-secondary" id="btnAnnullaPost">Annulla</button><button class="btn btn-primary" id="btnSalvaPost">Salva</button></div></div></div>

            <div id="modalStaff" class="modal"><div class="modal-overlay"></div><div class="modal-content modal-large"><div class="modal-header"><h3 id="modalStaffTitle">Nuovo Membro</h3><button class="modal-close">&times;</button></div><div class="modal-body"><form id="formStaff"><div class="form-row"><div class="form-field"><label>Nome</label><input type="text" name="staffFirstName" required></div><div class="form-field"><label>Cognome</label><input type="text" name="staffLastName" required></div></div><div class="form-row"><div class="form-field"><label>Ruolo</label><input type="text" name="staffRole" placeholder="es. CEO, Developer" required></div><div class="form-field"><label>Dipartimento</label><select name="staffDept" required><option value="">Seleziona</option><option value="management">Management</option><option value="development">Development</option><option value="design">Design</option><option value="marketing">Marketing</option><option value="sales">Sales</option></select></div></div><div class="form-field"><label>Email</label><input type="email" name="staffEmail" required></div><div class="form-field"><label>Bio</label><textarea name="staffBio" rows="3" style="width: 100%; padding: 12px 14px; background: rgba(15, 23, 42, 0.5); border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-light); font-size: 14px; font-family: inherit; resize: vertical;"></textarea></div><div class="form-field"><label>Foto</label><div class="service-image-upload" id="staffImageUpload"><input type="file" id="staffImageInput" accept="image/*" style="display: none;"><div class="service-image-placeholder" id="staffImagePlaceholder"><span class="upload-icon"></span><p>Seleziona foto profilo</p></div><div class="service-image-preview" id="staffImagePreview" style="display: none;"><img id="staffImagePreviewImg" src="" alt="Preview"><button type="button" class="btn-remove-image" id="btnRemoveStaffImage"></button></div></div></div></form></div><div class="modal-footer"><button class="btn btn-secondary" id="btnAnnullaStaff">Annulla</button><button class="btn btn-primary" id="btnSalvaStaff">Salva</button></div></div></div>
        </main>
    </div>

    <script>
        // Elements
        const loginPage = document.getElementById('loginPage');
        const dashboardPage = document.getElementById('dashboardPage');
        const loginForm = document.getElementById('loginForm');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const menuToggle = document.getElementById('menuToggle');
        const logoutBtn = document.getElementById('logoutBtn');

        // Login handler
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Mock authentication - accetta qualsiasi credenziale
            if (username && password) {
                loginPage.classList.add('hidden');
                dashboardPage.classList.add('active');

                // Update user avatar with first letter of username
                const userAvatar = document.querySelector('.user-avatar');
                userAvatar.textContent = username.charAt(0).toUpperCase();
            }
        });

        // Toggle sidebar on mobile
        menuToggle.addEventListener('click', function() {
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        });

        // Close sidebar when clicking overlay
        overlay.addEventListener('click', function() {
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
        });

        // Menu items click handler
        const menuItems = document.querySelectorAll('.menu-item:not(#logoutBtn)');
        menuItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();

                // Remove active class from all items
                menuItems.forEach(menuItem => menuItem.classList.remove('active'));

                // Add active class to clicked item
                this.classList.add('active');

                // Get menu text and navigate to corresponding view
                const menuText = this.querySelector('span:last-child').textContent;
                navigateToView(menuText);

                // Close sidebar on mobile after selection
                if (window.innerWidth < 768) {
                    sidebar.classList.remove('open');
                    overlay.classList.remove('active');
                }
            });
        });

        // Navigation between views
        function navigateToView(viewName) {
            // Hide all views
            document.querySelectorAll('.view-content').forEach(view => {
                view.classList.remove('active');
            });

            // Show the selected view
            const viewMap = {
                'Dashboard': 'dashboardView',
                'Utenti': 'utentiView',
                'Documenti': 'documentiView',
                'Servizi': 'serviziView',
                'Artisti': 'artistiView',
                'Post': 'postView',
                'Staff': 'staffView',
                'Notifiche': 'notificheView'
            };

            const viewId = viewMap[viewName];
            if (viewId) {
                const view = document.getElementById(viewId);
                if (view) {
                    view.classList.add('active');
                    // Update topbar title
                    document.querySelector('.topbar-title').textContent = viewName;
                }
            }
        }

        // Logout handler
        logoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            dashboardPage.classList.remove('active');
            loginPage.classList.remove('hidden');
            loginForm.reset();

            // Close sidebar if open
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
        });

        // Close sidebar on window resize to desktop
        window.addEventListener('resize', function() {
            if (window.innerWidth >= 768) {
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
            }
        });

        // Scroll effect for topbar
        let lastScroll = 0;
        const topbar = document.querySelector('.topbar');
        const contentArea = document.querySelector('.content-area');

        contentArea.addEventListener('scroll', function() {
            const currentScroll = contentArea.scrollTop;

            if (currentScroll > 50) {
                topbar.classList.add('scrolled');
            } else {
                topbar.classList.remove('scrolled');
            }

            lastScroll = currentScroll;
        });

        // Add ripple effect on buttons
        function createRipple(event) {
            const button = event.currentTarget;
            const ripple = document.createElement('span');
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;

            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');

            button.appendChild(ripple);

            setTimeout(() => {
                ripple.remove();
            }, 600);
        }

        // Add ripple style
        const style = document.createElement('style');
        style.textContent = `
            .ripple {
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.4);
                transform: scale(0);
                animation: ripple-animation 0.6s ease-out;
                pointer-events: none;
            }

            @keyframes ripple-animation {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // Apply ripple to menu toggle and user info
        menuToggle.addEventListener('click', createRipple);
        document.querySelector('.user-info').addEventListener('click', createRipple);

        // Animate menu items on load
        function animateMenuItems() {
            const items = document.querySelectorAll('.menu-item');
            items.forEach((item, index) => {
                item.style.opacity = '0';
                item.style.transform = 'translateX(-20px)';

                setTimeout(() => {
                    item.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    item.style.opacity = '1';
                    item.style.transform = 'translateX(0)';
                }, index * 50);
            });
        }

        // Run animation when dashboard becomes active
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.target.classList.contains('active')) {
                    setTimeout(animateMenuItems, 200);
                }
            });
        });

        observer.observe(dashboardPage, { attributes: true, attributeFilter: ['class'] });

        // Add parallax effect to background gradients
        document.addEventListener('mousemove', function(e) {
            if (!loginPage.classList.contains('hidden')) {
                const moveX = (e.clientX / window.innerWidth - 0.5) * 20;
                const moveY = (e.clientY / window.innerHeight - 0.5) * 20;

                loginPage.style.setProperty('--mouse-x', moveX + 'px');
                loginPage.style.setProperty('--mouse-y', moveY + 'px');
            }
        });

        // Enhanced login button feedback
        const btnLogin = document.querySelector('.btn-login');
        btnLogin.addEventListener('click', function(e) {
            if (!loginForm.checkValidity()) return;

            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = '';
            }, 150);
        });

        // Input focus animations
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'translateY(-2px)';
            });

            input.addEventListener('blur', function() {
                this.parentElement.style.transform = '';
            });
        });

        // Add keyboard navigation for menu
        document.addEventListener('keydown', function(e) {
            if (!dashboardPage.classList.contains('active')) return;

            const items = Array.from(document.querySelectorAll('.menu-item:not(#logoutBtn)'));
            const activeIndex = items.findIndex(item => item.classList.contains('active'));

            if (e.key === 'ArrowDown') {
                e.preventDefault();
                const nextIndex = (activeIndex + 1) % items.length;
                items[activeIndex].classList.remove('active');
                items[nextIndex].classList.add('active');
                items[nextIndex].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                const prevIndex = (activeIndex - 1 + items.length) % items.length;
                items[activeIndex].classList.remove('active');
                items[prevIndex].classList.add('active');
                items[prevIndex].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });

        // Loading state simulation for login
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (username && password) {
                btnLogin.textContent = 'Accesso in corso...';
                btnLogin.style.opacity = '0.7';
                btnLogin.disabled = true;

                setTimeout(() => {
                    loginPage.classList.add('hidden');
                    dashboardPage.classList.add('active');

                    const userAvatar = document.querySelector('.user-avatar');
                    userAvatar.textContent = username.charAt(0).toUpperCase();

                    btnLogin.textContent = 'Accedi';
                    btnLogin.style.opacity = '1';
                    btnLogin.disabled = false;

                    // Load users table
                    loadUsersTable();
                }, 800);
            }
        });

        // USER MANAGEMENT
        // Mock users data
        let users = [
            { id: 1, firstName: 'Mario', lastName: 'Rossi', email: 'mario.rossi@email.com', role: 'admin', status: 'active', lastAccess: '2 ore fa' },
            { id: 2, firstName: 'Laura', lastName: 'Bianchi', email: 'laura.bianchi@email.com', role: 'editor', status: 'active', lastAccess: '1 giorno fa' },
            { id: 3, firstName: 'Giuseppe', lastName: 'Verdi', email: 'giuseppe.verdi@email.com', role: 'viewer', status: 'active', lastAccess: '3 giorni fa' },
            { id: 4, firstName: 'Anna', lastName: 'Neri', email: 'anna.neri@email.com', role: 'editor', status: 'inactive', lastAccess: '1 settimana fa' },
            { id: 5, firstName: 'Francesco', lastName: 'Gialli', email: 'francesco.gialli@email.com', role: 'viewer', status: 'active', lastAccess: '5 ore fa' }
        ];

        // Load users table
        function loadUsersTable(filteredUsers = users) {
            const tbody = document.getElementById('usersTableBody');
            if (!tbody) return;

            tbody.innerHTML = '';

            filteredUsers.forEach(user => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>
                        <div class="user-card-mobile">
                            <div class="user-card-top">
                                <div class="user-card-header" onclick="toggleUserDetails(${user.id})">
                                    <div class="user-avatar-small">${user.firstName.charAt(0)}${user.lastName.charAt(0)}</div>
                                    <div class="user-name">${user.firstName} ${user.lastName}</div>
                                </div>
                                <div class="user-card-meta">
                                    <span class="badge badge-${user.role}">${user.role.charAt(0).toUpperCase() + user.role.slice(1)}</span>
                                    <div class="action-buttons">
                                        <button class="btn-icon" onclick="editUser(${user.id})" title="Modifica"></button>
                                        <button class="btn-icon" onclick="deleteUser(${user.id})" title="Elimina"></button>
                                    </div>
                                </div>
                            </div>
                            <div class="user-card-details" id="details-${user.id}">
                                <div class="user-card-detail-row">
                                    <span class="user-card-detail-label">Email</span>
                                    <span class="user-card-detail-value">${user.email}</span>
                                </div>
                                <div class="user-card-detail-row">
                                    <span class="user-card-detail-label">Stato</span>
                                    <span class="user-card-detail-value"><span class="badge badge-${user.status}">${user.status === 'active' ? 'Attivo' : 'Inattivo'}</span></span>
                                </div>
                                <div class="user-card-detail-row">
                                    <span class="user-card-detail-label">Ultimo accesso</span>
                                    <span class="user-card-detail-value">${user.lastAccess}</span>
                                </div>
                            </div>
                        </div>
                        <div class="user-cell">
                            <div class="user-avatar-small">${user.firstName.charAt(0)}${user.lastName.charAt(0)}</div>
                            <div class="user-name">${user.firstName} ${user.lastName}</div>
                        </div>
                    </td>
                    <td>${user.email}</td>
                    <td><span class="badge badge-${user.role}">${user.role.charAt(0).toUpperCase() + user.role.slice(1)}</span></td>
                    <td><span class="badge badge-${user.status}">${user.status === 'active' ? 'Attivo' : 'Inattivo'}</span></td>
                    <td>${user.lastAccess}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editUser(${user.id})" title="Modifica"></button>
                            <button class="btn-icon" onclick="deleteUser(${user.id})" title="Elimina"></button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Toggle user details on mobile
        function toggleUserDetails(userId) {
            const details = document.getElementById(`details-${userId}`);
            if (details) {
                details.classList.toggle('expanded');
            }
        }

        // Make toggle function globally accessible
        window.toggleUserDetails = toggleUserDetails;

        // Search users
        const searchUsers = document.getElementById('searchUsers');
        if (searchUsers) {
            searchUsers.addEventListener('input', filterUsers);
        }

        // Filter by role
        const filterRole = document.getElementById('filterRole');
        if (filterRole) {
            filterRole.addEventListener('change', filterUsers);
        }

        // Filter by status
        const filterStatus = document.getElementById('filterStatus');
        if (filterStatus) {
            filterStatus.addEventListener('change', filterUsers);
        }

        function filterUsers() {
            const searchTerm = searchUsers.value.toLowerCase();
            const roleFilter = filterRole.value;
            const statusFilter = filterStatus.value;

            const filtered = users.filter(user => {
                const matchesSearch = (user.firstName + ' ' + user.lastName + ' ' + user.email).toLowerCase().includes(searchTerm);
                const matchesRole = !roleFilter || user.role === roleFilter;
                const matchesStatus = !statusFilter || user.status === statusFilter;

                return matchesSearch && matchesRole && matchesStatus;
            });

            loadUsersTable(filtered);
        }

        // Modal management
        const modalNuovoUtente = document.getElementById('modalNuovoUtente');
        const modalGestisciRuoli = document.getElementById('modalGestisciRuoli');
        const btnNuovoUtente = document.getElementById('btnNuovoUtente');
        const btnGestisciRuoli = document.getElementById('btnGestisciRuoli');
        const btnCancellaUtente = document.getElementById('btnCancellaUtente');
        const btnSalvaUtente = document.getElementById('btnSalvaUtente');
        const btnChiudiRuoli = document.getElementById('btnChiudiRuoli');
        const formNuovoUtente = document.getElementById('formNuovoUtente');

        // Open nuovo utente modal
        if (btnNuovoUtente) {
            btnNuovoUtente.addEventListener('click', () => {
                modalNuovoUtente.classList.add('active');
            });
        }

        // Open gestisci ruoli modal
        if (btnGestisciRuoli) {
            btnGestisciRuoli.addEventListener('click', () => {
                modalGestisciRuoli.classList.add('active');
            });
        }

        // Close modals
        if (btnCancellaUtente) {
            btnCancellaUtente.addEventListener('click', () => {
                modalNuovoUtente.classList.remove('active');
                formNuovoUtente.reset();
            });
        }

        if (btnChiudiRuoli) {
            btnChiudiRuoli.addEventListener('click', () => {
                modalGestisciRuoli.classList.remove('active');
            });
        }

        // Close modal on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', () => {
                overlay.parentElement.classList.remove('active');
            });
        });

        // Close modal on X button
        document.querySelectorAll('.modal-close').forEach(btn => {
            btn.addEventListener('click', () => {
                btn.closest('.modal').classList.remove('active');
            });
        });

        // Save new user
        if (btnSalvaUtente) {
            btnSalvaUtente.addEventListener('click', () => {
                const formData = new FormData(formNuovoUtente);
                const newUser = {
                    id: users.length + 1,
                    firstName: formData.get('firstName'),
                    lastName: formData.get('lastName'),
                    email: formData.get('email'),
                    role: formData.get('role'),
                    status: formData.get('status'),
                    lastAccess: 'Mai'
                };

                users.push(newUser);
                loadUsersTable();
                modalNuovoUtente.classList.remove('active');
                formNuovoUtente.reset();

                // Show success notification (you can implement toast notification)
                alert('Utente creato con successo!');
            });
        }

        // Edit user function
        function editUser(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                // Populate form with user data
                document.querySelector('[name="firstName"]').value = user.firstName;
                document.querySelector('[name="lastName"]').value = user.lastName;
                document.querySelector('[name="email"]').value = user.email;
                document.querySelector('[name="role"]').value = user.role;
                document.querySelector('[name="status"]').value = user.status;

                modalNuovoUtente.classList.add('active');
                document.querySelector('.modal-header h3').textContent = 'Modifica Utente';

                // Update save button to update instead of create
                btnSalvaUtente.onclick = () => {
                    const formData = new FormData(formNuovoUtente);
                    user.firstName = formData.get('firstName');
                    user.lastName = formData.get('lastName');
                    user.email = formData.get('email');
                    user.role = formData.get('role');
                    user.status = formData.get('status');

                    loadUsersTable();
                    modalNuovoUtente.classList.remove('active');
                    formNuovoUtente.reset();
                    document.querySelector('.modal-header h3').textContent = 'Nuovo Utente';

                    alert('Utente aggiornato con successo!');
                };
            }
        }

        // Delete user function
        function deleteUser(userId) {
            if (confirm('Sei sicuro di voler eliminare questo utente?')) {
                users = users.filter(u => u.id !== userId);
                loadUsersTable();
                alert('Utente eliminato con successo!');
            }
        }

        // Make functions globally accessible
        window.editUser = editUser;
        window.deleteUser = deleteUser;

        // DOCUMENTS MANAGEMENT
        // Mock current user (simulated login)
        let currentUser = {
            id: 1,
            firstName: 'Mario',
            lastName: 'Rossi',
            role: 'admin' // admin can edit/delete all, editor can view all, viewer can only see own
        };

        // Mock documents data
        let documents = [
            { id: 1, name: 'Contratto_Cliente_2024.pdf', description: 'Contratto annuale cliente ABC', category: 'contratti', type: 'pdf', size: '2.4 MB', ownerId: 1, ownerName: 'Mario Rossi', uploadDate: '15/01/2024' },
            { id: 2, name: 'Fattura_Gennaio_2024.xlsx', description: 'Fatturazione mese di gennaio', category: 'fatture', type: 'xls', size: '1.8 MB', ownerId: 1, ownerName: 'Mario Rossi', uploadDate: '31/01/2024' },
            { id: 3, name: 'Report_Vendite_Q1.pdf', description: 'Report vendite primo trimestre', category: 'report', type: 'pdf', size: '3.2 MB', ownerId: 2, ownerName: 'Laura Bianchi', uploadDate: '10/02/2024' },
            { id: 4, name: 'Presentazione_Progetto.pptx', description: 'Presentazione nuovo progetto aziendale', category: 'presentazioni', type: 'doc', size: '5.1 MB', ownerId: 3, ownerName: 'Giuseppe Verdi', uploadDate: '20/02/2024' },
            { id: 5, name: 'Logo_Azienda.png', description: 'Logo ufficiale dell\'azienda', category: 'altro', type: 'img', size: '856 KB', ownerId: 1, ownerName: 'Mario Rossi', uploadDate: '05/01/2024' }
        ];

        let currentDocFilter = 'all'; // 'all' or 'mine'

        // Get document icon by type
        function getDocumentIcon(type) {
            const icons = {
                'pdf': '',
                'doc': '',
                'xls': '',
                'img': '',
                'video': '',
                'audio': '',
                'txt': '',
                'code': '',
                'zip': '',
                'other': ''
            };
            return icons[type] || icons['other'];
        }

        // Get type label
        function getTypeLabel(type) {
            const labels = {
                'pdf': 'PDF',
                'doc': 'DOC',
                'xls': 'XLS',
                'img': 'IMG',
                'video': 'VIDEO',
                'audio': 'AUDIO',
                'txt': 'TEXT',
                'code': 'CODE',
                'zip': 'ZIP',
                'other': 'FILE'
            };
            return labels[type] || 'FILE';
        }

        // Get file type from extension
        function getFileType(filename) {
            const ext = filename.split('.').pop().toLowerCase();

            // Images
            if (['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg', 'bmp'].includes(ext)) return 'img';

            // Videos
            if (['mp4', 'webm', 'ogg', 'mov', 'avi', 'mkv'].includes(ext)) return 'video';

            // Audio
            if (['mp3', 'wav', 'ogg', 'aac', 'm4a', 'flac'].includes(ext)) return 'audio';

            // Documents
            if (ext === 'pdf') return 'pdf';
            if (['doc', 'docx', 'odt', 'rtf'].includes(ext)) return 'doc';
            if (['xls', 'xlsx', 'ods', 'csv'].includes(ext)) return 'xls';
            if (['ppt', 'pptx', 'odp'].includes(ext)) return 'doc';

            // Text/Code
            if (['txt', 'md', 'log'].includes(ext)) return 'txt';
            if (['js', 'html', 'css', 'json', 'xml', 'py', 'java', 'cpp', 'c', 'php', 'rb'].includes(ext)) return 'code';

            // Archives
            if (['zip', 'rar', '7z', 'tar', 'gz'].includes(ext)) return 'zip';

            return 'other';
        }

        // Check if user can edit/delete document
        function canModifyDocument(doc) {
            if (currentUser.role === 'admin') return true;
            if (currentUser.role === 'editor' && doc.ownerId === currentUser.id) return true;
            if (doc.ownerId === currentUser.id) return true;
            return false;
        }

        // Check if user can view all documents
        function canViewAllDocuments() {
            return currentUser.role === 'admin' || currentUser.role === 'editor';
        }

        // Load documents grid
        function loadDocumentsGrid(filteredDocs = documents) {
            const grid = document.getElementById('documentsGrid');
            const emptyState = document.getElementById('emptyDocuments');

            if (!grid) return;

            // Filter based on current view
            let docsToShow = filteredDocs;
            if (currentDocFilter === 'mine') {
                docsToShow = filteredDocs.filter(doc => doc.ownerId === currentUser.id);
            } else if (!canViewAllDocuments()) {
                docsToShow = filteredDocs.filter(doc => doc.ownerId === currentUser.id);
            }

            if (docsToShow.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            emptyState.style.display = 'none';
            grid.innerHTML = '';

            docsToShow.forEach(doc => {
                const canModify = canModifyDocument(doc);
                const card = document.createElement('div');
                card.className = 'document-card';
                card.innerHTML = `
                    <div class="document-icon-container" onclick="previewDocument(${doc.id})">
                        <span class="document-icon">${getDocumentIcon(doc.type)}</span>
                        <span class="document-type-badge">${getTypeLabel(doc.type)}</span>
                    </div>
                    <div class="document-card-body">
                        <div class="document-title" title="${doc.name}">${doc.name}</div>
                        <div class="document-meta">
                            <div class="document-owner">
                                <div class="document-owner-avatar">${doc.ownerName.split(' ').map(n => n[0]).join('')}</div>
                                <span>${doc.ownerName}</span>
                            </div>
                            <span class="document-size">${doc.size}</span>
                        </div>
                        <div class="document-actions">
                            <button onclick="previewDocument(${doc.id})"> Anteprima</button>
                            ${canModify ? `<button onclick="deleteDocument(${doc.id})"> Elimina</button>` : ''}
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Filter documents
        function filterDocuments() {
            const searchTerm = document.getElementById('searchDocuments').value.toLowerCase();
            const typeFilter = document.getElementById('filterDocType').value;
            const ownerFilter = document.getElementById('filterDocOwner').value;

            let filtered = documents.filter(doc => {
                const matchesSearch = doc.name.toLowerCase().includes(searchTerm) ||
                                     doc.description.toLowerCase().includes(searchTerm);
                const matchesType = !typeFilter || doc.type === typeFilter;
                const matchesOwner = ownerFilter === '' ||
                                    (ownerFilter === 'me' && doc.ownerId === currentUser.id);

                return matchesSearch && matchesType && matchesOwner;
            });

            loadDocumentsGrid(filtered);
        }

        // Render preview based on file type
        function renderPreview(doc) {
            const previewArea = document.getElementById('previewContentArea');
            if (!previewArea) return;

            // Check if we have the actual file data
            if (!doc.fileData) {
                previewArea.innerHTML = `
                    <div class="preview-placeholder">
                        <span class="preview-icon">${getDocumentIcon(doc.type)}</span>
                        <p>Anteprima non disponibile - File non caricato</p>
                    </div>
                `;
                return;
            }

            const fileURL = doc.fileData;

            switch(doc.type) {
                case 'img':
                    previewArea.innerHTML = `<img src="${fileURL}" alt="${doc.name}">`;
                    break;

                case 'video':
                    previewArea.innerHTML = `
                        <video controls>
                            <source src="${fileURL}" type="video/mp4">
                            Il tuo browser non supporta il tag video.
                        </video>
                    `;
                    break;

                case 'audio':
                    previewArea.innerHTML = `
                        <div class="preview-audio-container">
                            <span class="audio-icon-large"></span>
                            <audio controls style="width: 100%;">
                                <source src="${fileURL}">
                                Il tuo browser non supporta il tag audio.
                            </audio>
                        </div>
                    `;
                    break;

                case 'pdf':
                    previewArea.innerHTML = `
                        <div class="preview-pdf-container">
                            <iframe src="${fileURL}" type="application/pdf"></iframe>
                        </div>
                    `;
                    break;

                case 'txt':
                case 'code':
                    // For text files, we would need to fetch and display the content
                    fetch(fileURL)
                        .then(response => response.text())
                        .then(text => {
                            previewArea.innerHTML = `
                                <div class="preview-text-container">
                                    <pre>${text}</pre>
                                </div>
                            `;
                        })
                        .catch(err => {
                            previewArea.innerHTML = `
                                <div class="preview-placeholder">
                                    <span class="preview-icon">${getDocumentIcon(doc.type)}</span>
                                    <p>Impossibile caricare l'anteprima del file di testo</p>
                                </div>
                            `;
                        });
                    break;

                default:
                    previewArea.innerHTML = `
                        <div class="preview-placeholder">
                            <span class="preview-icon">${getDocumentIcon(doc.type)}</span>
                            <p>Anteprima non disponibile per questo tipo di file</p>
                            <p style="margin-top: 8px; font-size: 13px;">Usa il pulsante "Scarica" per aprire il file</p>
                        </div>
                    `;
            }
        }

        // Preview document
        function previewDocument(docId) {
            const doc = documents.find(d => d.id === docId);
            if (!doc) return;

            const modal = document.getElementById('modalPreviewDocumento');
            const canModify = canModifyDocument(doc);

            document.getElementById('previewDocTitle').textContent = doc.name;
            document.getElementById('previewOwner').textContent = doc.ownerName;
            document.getElementById('previewCategory').textContent = doc.category.charAt(0).toUpperCase() + doc.category.slice(1);
            document.getElementById('previewType').textContent = getTypeLabel(doc.type);
            document.getElementById('previewSize').textContent = doc.size;
            document.getElementById('previewDate').textContent = doc.uploadDate;
            document.getElementById('previewDescription').textContent = doc.description;
            document.getElementById('previewIcon').textContent = getDocumentIcon(doc.type);

            // Render preview content
            renderPreview(doc);

            // Show/hide modify buttons based on permissions
            document.getElementById('btnModificaDoc').style.display = canModify ? 'inline-flex' : 'none';
            document.getElementById('btnEliminaDoc').style.display = canModify ? 'inline-flex' : 'none';

            // Store current doc id for actions
            modal.dataset.currentDocId = docId;

            modal.classList.add('active');
        }

        // Delete document
        function deleteDocument(docId) {
            if (confirm('Sei sicuro di voler eliminare questo documento?')) {
                documents = documents.filter(d => d.id !== docId);
                loadDocumentsGrid();
                // Close preview modal if open
                document.getElementById('modalPreviewDocumento').classList.remove('active');
                alert('Documento eliminato con successo!');
            }
        }

        // Modal management for documents
        const modalCaricaDocumento = document.getElementById('modalCaricaDocumento');
        const modalPreviewDocumento = document.getElementById('modalPreviewDocumento');
        const btnCaricaDocumento = document.getElementById('btnCaricaDocumento');
        const btnAnnullaDocumento = document.getElementById('btnAnnullaDocumento');
        const btnSalvaDocumento = document.getElementById('btnSalvaDocumento');
        const btnChiudiPreview = document.getElementById('btnChiudiPreview');
        const btnMieiDocumenti = document.getElementById('btnMieiDocumenti');
        const btnTuttiDocumenti = document.getElementById('btnTuttiDocumenti');
        const fileUploadArea = document.getElementById('fileUploadArea');
        const fileInput = document.getElementById('fileInput');
        const formCaricaDocumento = document.getElementById('formCaricaDocumento');

        // File upload interaction
        if (fileUploadArea && fileInput) {
            fileUploadArea.addEventListener('click', () => {
                fileInput.click();
            });

            fileInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const placeholder = fileUploadArea.querySelector('.file-upload-placeholder');
                    const selected = fileUploadArea.querySelector('.file-selected');
                    const fileName = selected.querySelector('.file-name');

                    placeholder.style.display = 'none';
                    selected.style.display = 'flex';
                    fileName.textContent = file.name;
                }
            });

            const btnRemoveFile = fileUploadArea.querySelector('.btn-remove-file');
            if (btnRemoveFile) {
                btnRemoveFile.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const placeholder = fileUploadArea.querySelector('.file-upload-placeholder');
                    const selected = fileUploadArea.querySelector('.file-selected');

                    fileInput.value = '';
                    placeholder.style.display = 'flex';
                    selected.style.display = 'none';
                });
            }
        }

        // Open upload modal
        if (btnCaricaDocumento) {
            btnCaricaDocumento.addEventListener('click', () => {
                modalCaricaDocumento.classList.add('active');
            });
        }

        // Close upload modal
        if (btnAnnullaDocumento) {
            btnAnnullaDocumento.addEventListener('click', () => {
                modalCaricaDocumento.classList.remove('active');
                formCaricaDocumento.reset();
                const placeholder = fileUploadArea.querySelector('.file-upload-placeholder');
                const selected = fileUploadArea.querySelector('.file-selected');
                placeholder.style.display = 'flex';
                selected.style.display = 'none';
            });
        }

        // Save document
        if (btnSalvaDocumento) {
            btnSalvaDocumento.addEventListener('click', () => {
                const formData = new FormData(formCaricaDocumento);
                const file = fileInput.files[0];

                if (!file) {
                    alert('Seleziona un file da caricare');
                    return;
                }

                // Get file type using the new function
                const type = getFileType(file.name);

                // Create file URL for preview
                const fileURL = URL.createObjectURL(file);

                const newDoc = {
                    id: documents.length + 1,
                    name: file.name,
                    description: formData.get('docDescription') || 'Nessuna descrizione',
                    category: formData.get('docCategory'),
                    type: type,
                    size: file.size < 1024 * 1024
                        ? (file.size / 1024).toFixed(2) + ' KB'
                        : (file.size / (1024 * 1024)).toFixed(2) + ' MB',
                    ownerId: currentUser.id,
                    ownerName: currentUser.firstName + ' ' + currentUser.lastName,
                    uploadDate: new Date().toLocaleDateString('it-IT'),
                    fileData: fileURL // Store the file URL for preview
                };

                documents.push(newDoc);
                loadDocumentsGrid();
                modalCaricaDocumento.classList.remove('active');
                formCaricaDocumento.reset();

                const placeholder = fileUploadArea.querySelector('.file-upload-placeholder');
                const selected = fileUploadArea.querySelector('.file-selected');
                placeholder.style.display = 'flex';
                selected.style.display = 'none';

                alert('Documento caricato con successo!');
            });
        }

        // Close preview modal
        if (btnChiudiPreview) {
            btnChiudiPreview.addEventListener('click', () => {
                modalPreviewDocumento.classList.remove('active');
            });
        }

        // Filter buttons
        if (btnMieiDocumenti) {
            btnMieiDocumenti.addEventListener('click', () => {
                currentDocFilter = 'mine';
                btnMieiDocumenti.classList.add('btn-primary');
                btnMieiDocumenti.classList.remove('btn-secondary');
                btnTuttiDocumenti.classList.remove('btn-primary');
                btnTuttiDocumenti.classList.add('btn-secondary');
                loadDocumentsGrid();
            });
        }

        if (btnTuttiDocumenti) {
            btnTuttiDocumenti.addEventListener('click', () => {
                if (!canViewAllDocuments()) {
                    alert('Non hai i permessi per visualizzare tutti i documenti');
                    return;
                }
                currentDocFilter = 'all';
                btnTuttiDocumenti.classList.add('btn-primary');
                btnTuttiDocumenti.classList.remove('btn-secondary');
                btnMieiDocumenti.classList.remove('btn-primary');
                btnMieiDocumenti.classList.add('btn-secondary');
                loadDocumentsGrid();
            });
        }

        // Search and filters
        const searchDocuments = document.getElementById('searchDocuments');
        if (searchDocuments) {
            searchDocuments.addEventListener('input', filterDocuments);
        }

        const filterDocType = document.getElementById('filterDocType');
        if (filterDocType) {
            filterDocType.addEventListener('change', filterDocuments);
        }

        const filterDocOwner = document.getElementById('filterDocOwner');
        if (filterDocOwner) {
            filterDocOwner.addEventListener('change', filterDocuments);
        }

        // Delete from preview modal
        const btnEliminaDoc = document.getElementById('btnEliminaDoc');
        if (btnEliminaDoc) {
            btnEliminaDoc.addEventListener('click', () => {
                const docId = parseInt(modalPreviewDocumento.dataset.currentDocId);
                deleteDocument(docId);
            });
        }

        // Download document
        const btnScaricaDoc = document.getElementById('btnScaricaDoc');
        if (btnScaricaDoc) {
            btnScaricaDoc.addEventListener('click', () => {
                const docId = parseInt(modalPreviewDocumento.dataset.currentDocId);
                const doc = documents.find(d => d.id === docId);
                if (doc && doc.fileData) {
                    const link = document.createElement('a');
                    link.href = doc.fileData;
                    link.download = doc.name;
                    link.click();
                } else {
                    alert('File non disponibile per il download');
                }
            });
        }

        // Make functions globally accessible
        window.previewDocument = previewDocument;
        window.deleteDocument = deleteDocument;

        // Load documents when view becomes active
        const documentiMenuItem = document.querySelector('.menu-item:nth-child(3)'); // Documenti is 3rd item
        if (documentiMenuItem) {
            documentiMenuItem.addEventListener('click', () => {
                setTimeout(() => {
                    loadDocumentsGrid();
                }, 100);
            });
        }

        // SERVICES MANAGEMENT
        // Mock services data
        let services = [
            { id: 1, name: 'Consulenza Strategica', category: 'consulenza', shortDesc: 'Analisi e strategia aziendale personalizzata', description: 'Offriamo consulenza strategica completa per aiutare la tua azienda a crescere e raggiungere i suoi obiettivi di business.', price: 1500, duration: '1 mese', status: 'active', image: null },
            { id: 2, name: 'Sviluppo Web App', category: 'sviluppo', shortDesc: 'Applicazioni web moderne e responsive', description: 'Sviluppiamo applicazioni web personalizzate utilizzando le tecnologie pi moderne e performanti.', price: 5000, duration: '3 mesi', status: 'active', image: null },
            { id: 3, name: 'Brand Identity', category: 'design', shortDesc: 'Creazione logo e identit visiva', description: 'Progettiamo l\'identit visiva completa del tuo brand, dal logo ai materiali di comunicazione.', price: 2500, duration: '2 settimane', status: 'active', image: null },
            { id: 4, name: 'Social Media Marketing', category: 'marketing', shortDesc: 'Gestione completa social media', description: 'Gestiamo i tuoi canali social con strategia, contenuti e advertising per massimizzare la tua presenza online.', price: 800, duration: '1 mese', status: 'active', image: null },
            { id: 5, name: 'Supporto Tecnico Premium', category: 'supporto', shortDesc: 'Assistenza dedicata h24', description: 'Supporto tecnico dedicato disponibile 24/7 per garantire il funzionamento ottimale dei tuoi sistemi.', price: 1200, duration: '1 mese', status: 'inactive', image: null }
        ];

        let currentServiceId = null; // For editing
        let currentServiceImage = null; // For storing image data

        // Get category icon
        function getCategoryIcon(category) {
            const icons = {
                'consulenza': '',
                'sviluppo': '',
                'design': '',
                'marketing': '',
                'supporto': ''
            };
            return icons[category] || '';
        }

        // Load services grid
        function loadServicesGrid(filteredServices = services) {
            const grid = document.getElementById('servicesGrid');
            const emptyState = document.getElementById('emptyServices');

            if (!grid) return;

            if (filteredServices.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            emptyState.style.display = 'none';
            grid.innerHTML = '';

            filteredServices.forEach(service => {
                const card = document.createElement('div');
                card.className = 'service-card';
                card.innerHTML = `
                    ${service.image ? `<img src="${service.image}" alt="${service.name}" class="service-image">` : ''}
                    <div class="service-card-header">
                        <span class="service-category-badge">${getCategoryIcon(service.category)} ${service.category}</span>
                        <h3 class="service-title">${service.name}</h3>
                        <p class="service-short-desc">${service.shortDesc}</p>
                    </div>
                    <div class="service-card-body">
                        <p class="service-description">${service.description}</p>
                        <div class="service-meta">
                            <div class="service-meta-item">
                                <span class="service-meta-label">Prezzo</span>
                                <span class="service-meta-value service-price">${service.price.toLocaleString('it-IT')}</span>
                            </div>
                            <div class="service-meta-item">
                                <span class="service-meta-label">Durata</span>
                                <span class="service-meta-value">${service.duration}</span>
                            </div>
                        </div>
                    </div>
                    <div class="service-card-footer">
                        <div class="service-status">
                            <span class="status-dot ${service.status}"></span>
                            <span>${service.status === 'active' ? 'Attivo' : 'Inattivo'}</span>
                        </div>
                        <div class="service-actions">
                            <button class="btn-icon" onclick="editService(${service.id})" title="Modifica"></button>
                            <button class="btn-icon" onclick="deleteService(${service.id})" title="Elimina"></button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Filter services
        function filterServices() {
            const searchTerm = document.getElementById('searchServices').value.toLowerCase();
            const categoryFilter = document.getElementById('filterServiceCategory').value;
            const statusFilter = document.getElementById('filterServiceStatus').value;

            const filtered = services.filter(service => {
                const matchesSearch = service.name.toLowerCase().includes(searchTerm) ||
                                     service.description.toLowerCase().includes(searchTerm) ||
                                     service.shortDesc.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || service.category === categoryFilter;
                const matchesStatus = !statusFilter || service.status === statusFilter;

                return matchesSearch && matchesCategory && matchesStatus;
            });

            loadServicesGrid(filtered);
        }

        // Edit service
        function editService(serviceId) {
            const service = services.find(s => s.id === serviceId);
            if (!service) return;

            currentServiceId = serviceId;
            currentServiceImage = service.image;

            const modal = document.getElementById('modalServizio');
            const form = document.getElementById('formServizio');

            document.getElementById('modalServizioTitle').textContent = 'Modifica Servizio';

            form.serviceName.value = service.name;
            form.serviceCategory.value = service.category;
            form.serviceShortDesc.value = service.shortDesc;
            form.serviceDescription.value = service.description;
            form.servicePrice.value = service.price;
            form.serviceDuration.value = service.duration;
            form.serviceStatus.value = service.status;

            // Handle image preview
            const placeholder = document.getElementById('serviceImagePlaceholder');
            const preview = document.getElementById('serviceImagePreview');
            const previewImg = document.getElementById('serviceImagePreviewImg');

            if (service.image) {
                placeholder.style.display = 'none';
                preview.style.display = 'block';
                previewImg.src = service.image;
            } else {
                placeholder.style.display = 'flex';
                preview.style.display = 'none';
            }

            modal.classList.add('active');
        }

        // Delete service
        function deleteService(serviceId) {
            if (confirm('Sei sicuro di voler eliminare questo servizio?')) {
                services = services.filter(s => s.id !== serviceId);
                loadServicesGrid();
                alert('Servizio eliminato con successo!');
            }
        }

        // Modal management for services
        const modalServizio = document.getElementById('modalServizio');
        const btnNuovoServizio = document.getElementById('btnNuovoServizio');
        const btnAnnullaServizio = document.getElementById('btnAnnullaServizio');
        const btnSalvaServizio = document.getElementById('btnSalvaServizio');
        const formServizio = document.getElementById('formServizio');

        // Service image upload interaction
        const serviceImageUpload = document.getElementById('serviceImageUpload');
        const serviceImageInput = document.getElementById('serviceImageInput');
        const serviceImagePlaceholder = document.getElementById('serviceImagePlaceholder');
        const serviceImagePreview = document.getElementById('serviceImagePreview');
        const serviceImagePreviewImg = document.getElementById('serviceImagePreviewImg');
        const btnRemoveServiceImage = document.getElementById('btnRemoveServiceImage');

        if (serviceImageUpload && serviceImageInput) {
            serviceImageUpload.addEventListener('click', (e) => {
                if (!e.target.closest('.btn-remove-image')) {
                    serviceImageInput.click();
                }
            });

            serviceImageInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 5 * 1024 * 1024) {
                        alert('L\'immagine deve essere inferiore a 5MB');
                        return;
                    }

                    const reader = new FileReader();
                    reader.onload = (event) => {
                        currentServiceImage = event.target.result;
                        serviceImagePlaceholder.style.display = 'none';
                        serviceImagePreview.style.display = 'block';
                        serviceImagePreviewImg.src = currentServiceImage;
                    };
                    reader.readAsDataURL(file);
                }
            });

            if (btnRemoveServiceImage) {
                btnRemoveServiceImage.addEventListener('click', (e) => {
                    e.stopPropagation();
                    currentServiceImage = null;
                    serviceImageInput.value = '';
                    serviceImagePlaceholder.style.display = 'flex';
                    serviceImagePreview.style.display = 'none';
                });
            }
        }

        // Open new service modal
        if (btnNuovoServizio) {
            btnNuovoServizio.addEventListener('click', () => {
                currentServiceId = null;
                currentServiceImage = null;
                document.getElementById('modalServizioTitle').textContent = 'Nuovo Servizio';
                formServizio.reset();
                serviceImagePlaceholder.style.display = 'flex';
                serviceImagePreview.style.display = 'none';
                modalServizio.classList.add('active');
            });
        }

        // Close service modal
        if (btnAnnullaServizio) {
            btnAnnullaServizio.addEventListener('click', () => {
                modalServizio.classList.remove('active');
                formServizio.reset();
                currentServiceId = null;
                currentServiceImage = null;
                serviceImagePlaceholder.style.display = 'flex';
                serviceImagePreview.style.display = 'none';
            });
        }

        // Save service
        if (btnSalvaServizio) {
            btnSalvaServizio.addEventListener('click', () => {
                const formData = new FormData(formServizio);

                if (currentServiceId) {
                    // Update existing service
                    const service = services.find(s => s.id === currentServiceId);
                    if (service) {
                        service.name = formData.get('serviceName');
                        service.category = formData.get('serviceCategory');
                        service.shortDesc = formData.get('serviceShortDesc');
                        service.description = formData.get('serviceDescription');
                        service.price = parseFloat(formData.get('servicePrice'));
                        service.duration = formData.get('serviceDuration');
                        service.status = formData.get('serviceStatus');
                        service.image = currentServiceImage;

                        alert('Servizio aggiornato con successo!');
                    }
                } else {
                    // Create new service
                    const newService = {
                        id: services.length + 1,
                        name: formData.get('serviceName'),
                        category: formData.get('serviceCategory'),
                        shortDesc: formData.get('serviceShortDesc'),
                        description: formData.get('serviceDescription'),
                        price: parseFloat(formData.get('servicePrice')),
                        duration: formData.get('serviceDuration'),
                        status: formData.get('serviceStatus'),
                        image: currentServiceImage
                    };

                    services.push(newService);
                    alert('Servizio creato con successo!');
                }

                loadServicesGrid();
                modalServizio.classList.remove('active');
                formServizio.reset();
                currentServiceId = null;
                currentServiceImage = null;
                serviceImagePlaceholder.style.display = 'flex';
                serviceImagePreview.style.display = 'none';
            });
        }

        // Search and filters for services
        const searchServices = document.getElementById('searchServices');
        if (searchServices) {
            searchServices.addEventListener('input', filterServices);
        }

        const filterServiceCategory = document.getElementById('filterServiceCategory');
        if (filterServiceCategory) {
            filterServiceCategory.addEventListener('change', filterServices);
        }

        const filterServiceStatus = document.getElementById('filterServiceStatus');
        if (filterServiceStatus) {
            filterServiceStatus.addEventListener('change', filterServices);
        }

        // Make functions globally accessible
        window.editService = editService;
        window.deleteService = deleteService;

        // Load services when view becomes active
        const serviziMenuItem = document.querySelector('.menu-item:nth-child(4)'); // Servizi is 4th item
        if (serviziMenuItem) {
            serviziMenuItem.addEventListener('click', () => {
                setTimeout(() => {
                    loadServicesGrid();
                }, 100);
            });
        }

        // ARTISTS MANAGEMENT
        let artists = [
            { id: 1, name: 'John Doe', genre: 'pop', bio: 'Un artista pop emergente con uno stile unico e innovativo.', image: null },
            { id: 2, name: 'Jane Smith', genre: 'rock', bio: 'Rock star conosciuta per le sue performance energiche.', image: null }
        ];
        let albums = [
            { id: 1, artistId: 1, title: 'First Album', year: 2023, cover: null },
            { id: 2, artistId: 2, title: 'Rock Revolution', year: 2022, cover: null }
        ];
        let tracks = [
            { id: 1, albumId: 1, title: 'Song One', duration: '3:45', trackNumber: 1 },
            { id: 2, albumId: 1, title: 'Song Two', duration: '4:12', trackNumber: 2 },
            { id: 3, albumId: 2, title: 'Rock Anthem', duration: '5:30', trackNumber: 1 }
        ];

        let currentArtistId = null, currentAlbumId = null, currentTrackId = null;
        let currentArtistImage = null, currentAlbumImage = null;
        let selectedArtistId = null;

        function loadArtistsGrid(filtered = artists) {
            const grid = document.getElementById('artistsGrid');
            const empty = document.getElementById('emptyArtists');
            if (!grid) return;
            if (filtered.length === 0) { grid.style.display = 'none'; empty.style.display = 'block'; return; }
            grid.style.display = 'grid'; empty.style.display = 'none'; grid.innerHTML = '';
            filtered.forEach(artist => {
                const card = document.createElement('div');
                card.className = 'artist-card';
                card.onclick = () => showArtistDetail(artist.id);
                card.innerHTML = `${artist.image ? `<img src="${artist.image}" class="artist-card-image" alt="${artist.name}">` : `<div class="artist-card-image" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(167, 139, 250, 0.2)); display: flex; align-items: center; justify-content: center; font-size: 64px;"></div>`}<div class="artist-card-body"><h3 class="artist-card-name">${artist.name}</h3><p class="artist-card-genre">${artist.genre}</p><div class="artist-card-actions"><button class="btn-icon" onclick="event.stopPropagation(); editArtist(${artist.id})"></button><button class="btn-icon" onclick="event.stopPropagation(); deleteArtist(${artist.id})"></button></div></div>`;
                grid.appendChild(card);
            });
        }

        function showArtistDetail(artistId) {
            const artist = artists.find(a => a.id === artistId);
            if (!artist) return;
            selectedArtistId = artistId;
            document.getElementById('artistiListView').style.display = 'none';
            document.getElementById('artistDetailView').style.display = 'block';
            document.getElementById('artistDetailName').textContent = artist.name;
            document.getElementById('artistDetailGenre').textContent = artist.genre.toUpperCase();
            document.getElementById('artistDetailBio').textContent = artist.bio;
            document.getElementById('artistDetailImage').src = artist.image || 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect fill="%236366f1" width="200" height="200"/><text x="50%" y="50%" fill="white" font-size="80" text-anchor="middle" dy=".3em"></text></svg>';
            loadAlbumsForArtist(artistId);
        }

        function loadAlbumsForArtist(artistId) {
            const artistAlbums = albums.filter(a => a.artistId === artistId);
            const grid = document.getElementById('albumsGrid');
            const empty = document.getElementById('emptyAlbums');
            if (artistAlbums.length === 0) { grid.style.display = 'none'; empty.style.display = 'block'; return; }
            grid.style.display = 'grid'; empty.style.display = 'none'; grid.innerHTML = '';
            artistAlbums.forEach(album => {
                const albumTracks = tracks.filter(t => t.albumId === album.id).sort((a,b) => a.trackNumber - b.trackNumber);
                const card = document.createElement('div');
                card.className = 'album-card';
                card.innerHTML = `${album.cover ? `<img src="${album.cover}" class="album-cover">` : `<div class="album-cover" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.3), rgba(167, 139, 250, 0.3)); display: flex; align-items: center; justify-content: center; font-size: 80px;"></div>`}<div class="album-body"><h3 class="album-title">${album.title}</h3><p class="album-year">${album.year}</p><div class="album-actions"><button class="btn-icon" onclick="editAlbum(${album.id})"></button><button class="btn-icon" onclick="deleteAlbum(${album.id})"></button></div><div class="album-tracks">${albumTracks.map(t => `<div class="track-item"><div class="track-info"><span class="track-number">${t.trackNumber}.</span><span class="track-title">${t.title}</span></div><div style="display:flex;align-items:center;gap:12px;"><span class="track-duration">${t.duration}</span><div class="track-actions"><button class="btn-icon" onclick="deleteTrack(${t.id})" style="font-size:12px;"></button></div></div></div>`).join('')}</div><button class="btn-add-track" onclick="openAddTrackModal(${album.id})">+ Aggiungi Traccia</button></div>`;
                grid.appendChild(card);
            });
        }

        document.getElementById('btnBackToArtists')?.addEventListener('click', () => {
            document.getElementById('artistDetailView').style.display = 'none';
            document.getElementById('artistiListView').style.display = 'block';
            selectedArtistId = null;
        });

        document.getElementById('btnEditArtist')?.addEventListener('click', () => {
            if (selectedArtistId) editArtist(selectedArtistId);
        });

        // Modal handlers
        setupImageUpload('artistImageUpload', 'artistImageInput', 'artistImagePlaceholder', 'artistImagePreview', 'artistImagePreviewImg', 'btnRemoveArtistImage', (img) => currentArtistImage = img);
        setupImageUpload('albumImageUpload', 'albumImageInput', 'albumImagePlaceholder', 'albumImagePreview', 'albumImagePreviewImg', 'btnRemoveAlbumImage', (img) => currentAlbumImage = img);

        function setupImageUpload(uploadId, inputId, placeholderId, previewId, imgId, btnId, callback) {
            const upload = document.getElementById(uploadId), input = document.getElementById(inputId);
            if (!upload || !input) return;
            upload.addEventListener('click', (e) => { if (!e.target.closest('.btn-remove-image')) input.click(); });
            input.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file && file.size <= 5*1024*1024) {
                    const reader = new FileReader();
                    reader.onload = (ev) => {
                        callback(ev.target.result);
                        document.getElementById(placeholderId).style.display = 'none';
                        document.getElementById(previewId).style.display = 'block';
                        document.getElementById(imgId).src = ev.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
            document.getElementById(btnId)?.addEventListener('click', (e) => {
                e.stopPropagation();
                callback(null);
                input.value = '';
                document.getElementById(placeholderId).style.display = 'flex';
                document.getElementById(previewId).style.display = 'none';
            });
        }

        document.getElementById('btnNuovoArtista')?.addEventListener('click', () => {
            currentArtistId = null; currentArtistImage = null;
            document.getElementById('modalArtistaTitle').textContent = 'Nuovo Artista';
            document.getElementById('formArtista').reset();
            document.getElementById('artistImagePlaceholder').style.display = 'flex';
            document.getElementById('artistImagePreview').style.display = 'none';
            document.getElementById('modalArtista').classList.add('active');
        });

        document.getElementById('btnSalvaArtista')?.addEventListener('click', () => {
            const form = new FormData(document.getElementById('formArtista'));
            if (currentArtistId) {
                const artist = artists.find(a => a.id === currentArtistId);
                if (artist) { artist.name = form.get('artistName'); artist.genre = form.get('artistGenre'); artist.bio = form.get('artistBio'); artist.image = currentArtistImage; }
            } else {
                artists.push({ id: artists.length + 1, name: form.get('artistName'), genre: form.get('artistGenre'), bio: form.get('artistBio'), image: currentArtistImage });
            }
            loadArtistsGrid();
            document.getElementById('modalArtista').classList.remove('active');
        });

        document.getElementById('btnAnnullaArtista')?.addEventListener('click', () => document.getElementById('modalArtista').classList.remove('active'));

        function editArtist(id) {
            const artist = artists.find(a => a.id === id);
            if (!artist) return;
            currentArtistId = id; currentArtistImage = artist.image;
            document.getElementById('modalArtistaTitle').textContent = 'Modifica Artista';
            const form = document.getElementById('formArtista');
            form.artistName.value = artist.name; form.artistGenre.value = artist.genre; form.artistBio.value = artist.bio;
            if (artist.image) { document.getElementById('artistImagePlaceholder').style.display = 'none'; document.getElementById('artistImagePreview').style.display = 'block'; document.getElementById('artistImagePreviewImg').src = artist.image; }
            document.getElementById('modalArtista').classList.add('active');
        }

        function deleteArtist(id) {
            if (confirm('Eliminare artista e tutta la sua discografia?')) {
                artists = artists.filter(a => a.id !== id);
                albums.filter(al => al.artistId === id).forEach(al => tracks = tracks.filter(t => t.albumId !== al.id));
                albums = albums.filter(al => al.artistId !== id);
                loadArtistsGrid();
            }
        }

        document.getElementById('btnNuovoAlbum')?.addEventListener('click', () => {
            if (!selectedArtistId) return;
            currentAlbumId = null; currentAlbumImage = null;
            document.getElementById('modalAlbumTitle').textContent = 'Nuovo Album';
            document.getElementById('formAlbum').reset();
            document.getElementById('albumImagePlaceholder').style.display = 'flex';
            document.getElementById('albumImagePreview').style.display = 'none';
            document.getElementById('modalAlbum').classList.add('active');
        });

        document.getElementById('btnSalvaAlbum')?.addEventListener('click', () => {
            const form = new FormData(document.getElementById('formAlbum'));
            if (currentAlbumId) {
                const album = albums.find(a => a.id === currentAlbumId);
                if (album) { album.title = form.get('albumTitle'); album.year = parseInt(form.get('albumYear')); album.cover = currentAlbumImage; }
            } else {
                albums.push({ id: albums.length + 1, artistId: selectedArtistId, title: form.get('albumTitle'), year: parseInt(form.get('albumYear')), cover: currentAlbumImage });
            }
            loadAlbumsForArtist(selectedArtistId);
            document.getElementById('modalAlbum').classList.remove('active');
        });

        document.getElementById('btnAnnullaAlbum')?.addEventListener('click', () => document.getElementById('modalAlbum').classList.remove('active'));

        function editAlbum(id) {
            const album = albums.find(a => a.id === id);
            if (!album) return;
            currentAlbumId = id; currentAlbumImage = album.cover;
            document.getElementById('modalAlbumTitle').textContent = 'Modifica Album';
            const form = document.getElementById('formAlbum');
            form.albumTitle.value = album.title; form.albumYear.value = album.year;
            if (album.cover) { document.getElementById('albumImagePlaceholder').style.display = 'none'; document.getElementById('albumImagePreview').style.display = 'block'; document.getElementById('albumImagePreviewImg').src = album.cover; }
            document.getElementById('modalAlbum').classList.add('active');
        }

        function deleteAlbum(id) {
            if (confirm('Eliminare album e tutte le tracce?')) {
                tracks = tracks.filter(t => t.albumId !== id);
                albums = albums.filter(a => a.id !== id);
                loadAlbumsForArtist(selectedArtistId);
            }
        }

        function openAddTrackModal(albumId) {
            currentAlbumId = albumId; currentTrackId = null;
            document.getElementById('modalTracciaTitle').textContent = 'Nuova Traccia';
            const form = document.getElementById('formTraccia');
            form.reset();
            const maxTrack = Math.max(0, ...tracks.filter(t => t.albumId === albumId).map(t => t.trackNumber));
            form.trackNumber.value = maxTrack + 1;
            document.getElementById('modalTraccia').classList.add('active');
        }

        document.getElementById('btnSalvaTraccia')?.addEventListener('click', () => {
            const form = new FormData(document.getElementById('formTraccia'));
            tracks.push({ id: tracks.length + 1, albumId: currentAlbumId, title: form.get('trackTitle'), duration: form.get('trackDuration'), trackNumber: parseInt(form.get('trackNumber')) });
            loadAlbumsForArtist(selectedArtistId);
            document.getElementById('modalTraccia').classList.remove('active');
        });

        document.getElementById('btnAnnullaTraccia')?.addEventListener('click', () => document.getElementById('modalTraccia').classList.remove('active'));

        function deleteTrack(id) {
            if (confirm('Eliminare questa traccia?')) {
                tracks = tracks.filter(t => t.id !== id);
                loadAlbumsForArtist(selectedArtistId);
            }
        }

        document.getElementById('searchArtists')?.addEventListener('input', (e) => {
            const search = e.target.value.toLowerCase();
            loadArtistsGrid(artists.filter(a => a.name.toLowerCase().includes(search) || a.bio.toLowerCase().includes(search)));
        });

        document.getElementById('filterArtistGenre')?.addEventListener('change', (e) => {
            const genre = e.target.value;
            loadArtistsGrid(genre ? artists.filter(a => a.genre === genre) : artists);
        });

        window.editArtist = editArtist;
        window.deleteArtist = deleteArtist;
        window.showArtistDetail = showArtistDetail;
        window.editAlbum = editAlbum;
        window.deleteAlbum = deleteAlbum;
        window.openAddTrackModal = openAddTrackModal;
        window.deleteTrack = deleteTrack;

        const artistiMenuItem = document.querySelector('.menu-item:nth-child(5)');
        if (artistiMenuItem) {
            artistiMenuItem.addEventListener('click', () => {
                setTimeout(() => loadArtistsGrid(), 100);
            });
        }

        // POST MANAGEMENT
        let posts = [
            { id: 1, title: 'Benvenuti nel nostro blog', content: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.', excerpt: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit.', category: 'News', status: 'published', image: '', date: '2025-01-10', author: 'Admin' },
            { id: 2, title: 'Come utilizzare la piattaforma', content: 'Tutorial completo sull\'utilizzo della piattaforma gestionale.', excerpt: 'Tutorial completo sull\'utilizzo della piattaforma.', category: 'Tutorial', status: 'published', image: '', date: '2025-01-08', author: 'Admin' },
            { id: 3, title: 'Novit in arrivo', content: 'Stiamo lavorando a nuove funzionalit entusiasmanti.', excerpt: 'Stiamo lavorando a nuove funzionalit.', category: 'News', status: 'draft', image: '', date: '2025-01-12', author: 'Editor' }
        ];
        let currentPostId = null;
        let postImageData = '';

        function loadPostsGrid(filteredPosts = posts) {
            const grid = document.getElementById('postsGrid');
            const empty = document.getElementById('emptyPosts');
            if (filteredPosts.length === 0) {
                grid.style.display = 'none';
                empty.style.display = 'flex';
                return;
            }
            grid.style.display = 'grid';
            empty.style.display = 'none';
            grid.innerHTML = filteredPosts.map(p => `
                <div class="post-card">
                    ${p.image ? `<img src="${p.image}" alt="${p.title}" class="post-card-image">` : '<div class="post-card-image" style="background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); display: flex; align-items: center; justify-content: center; font-size: 48px;"></div>'}
                    <div class="post-card-body">
                        <div class="post-title">${p.title}</div>
                        <div class="post-excerpt">${p.excerpt}</div>
                        <div class="post-meta">
                            <span> ${p.date}</span>
                            <span> ${p.author}</span>
                            <span class="badge badge-${p.status === 'published' ? 'success' : 'warning'}">${p.status === 'published' ? 'Pubblicato' : 'Bozza'}</span>
                        </div>
                        <div class="post-actions">
                            <button class="btn btn-sm btn-secondary" onclick="editPost(${p.id})"> Modifica</button>
                            <button class="btn btn-sm btn-danger" onclick="deletePost(${p.id})"> Elimina</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        document.getElementById('btnNuovoPost')?.addEventListener('click', () => {
            currentPostId = null;
            postImageData = '';
            document.getElementById('modalPostTitle').textContent = 'Nuovo Post';
            document.getElementById('formPost').reset();
            document.getElementById('postImagePreview').style.display = 'none';
            document.getElementById('postImagePlaceholder').style.display = 'flex';
            document.getElementById('modalPost').classList.add('active');
        });

        setupImageUpload('postImageUpload', 'postImageInput', 'postImagePlaceholder', 'postImagePreview', 'postImagePreviewImg', 'btnRemovePostImage', (dataUrl) => { postImageData = dataUrl; });

        document.getElementById('btnSalvaPost')?.addEventListener('click', () => {
            const form = new FormData(document.getElementById('formPost'));
            const postData = {
                title: form.get('postTitle'),
                content: form.get('postContent'),
                excerpt: form.get('postContent').substring(0, 100) + '...',
                category: form.get('postCategory') || 'Generale',
                status: form.get('postStatus'),
                image: postImageData,
                date: new Date().toISOString().split('T')[0],
                author: 'Admin'
            };
            if (currentPostId) {
                const post = posts.find(p => p.id === currentPostId);
                Object.assign(post, postData);
            } else {
                posts.push({ id: posts.length + 1, ...postData });
            }
            loadPostsGrid();
            document.getElementById('modalPost').classList.remove('active');
        });

        document.getElementById('btnAnnullaPost')?.addEventListener('click', () => document.getElementById('modalPost').classList.remove('active'));

        function editPost(id) {
            currentPostId = id;
            const post = posts.find(p => p.id === id);
            document.getElementById('modalPostTitle').textContent = 'Modifica Post';
            const form = document.getElementById('formPost');
            form.postTitle.value = post.title;
            form.postContent.value = post.content;
            form.postCategory.value = post.category;
            form.postStatus.value = post.status;
            postImageData = post.image;
            if (post.image) {
                document.getElementById('postImagePreviewImg').src = post.image;
                document.getElementById('postImagePreview').style.display = 'block';
                document.getElementById('postImagePlaceholder').style.display = 'none';
            } else {
                document.getElementById('postImagePreview').style.display = 'none';
                document.getElementById('postImagePlaceholder').style.display = 'flex';
            }
            document.getElementById('modalPost').classList.add('active');
        }

        function deletePost(id) {
            if (confirm('Eliminare questo post?')) {
                posts = posts.filter(p => p.id !== id);
                loadPostsGrid();
            }
        }

        document.getElementById('searchPosts')?.addEventListener('input', (e) => {
            const search = e.target.value.toLowerCase();
            loadPostsGrid(posts.filter(p => p.title.toLowerCase().includes(search) || p.content.toLowerCase().includes(search) || p.category.toLowerCase().includes(search)));
        });

        document.getElementById('filterPostStatus')?.addEventListener('change', (e) => {
            const status = e.target.value;
            loadPostsGrid(status ? posts.filter(p => p.status === status) : posts);
        });

        window.editPost = editPost;
        window.deletePost = deletePost;

        const postMenuItem = document.querySelector('.menu-item:nth-child(6)');
        if (postMenuItem) {
            postMenuItem.addEventListener('click', () => {
                setTimeout(() => loadPostsGrid(), 100);
            });
        }

        // STAFF MANAGEMENT
        let staff = [
            { id: 1, firstName: 'Marco', lastName: 'Rossi', role: 'CEO', department: 'management', email: 'marco.rossi@azienda.com', bio: 'Fondatore e CEO dell\'azienda con 20 anni di esperienza.', image: '' },
            { id: 2, firstName: 'Laura', lastName: 'Bianchi', role: 'Lead Developer', department: 'development', email: 'laura.bianchi@azienda.com', bio: 'Sviluppatrice senior specializzata in architetture cloud.', image: '' },
            { id: 3, firstName: 'Giuseppe', lastName: 'Verdi', role: 'Designer', department: 'design', email: 'giuseppe.verdi@azienda.com', bio: 'Creative director con passione per UI/UX design.', image: '' }
        ];
        let currentStaffId = null;
        let staffImageData = '';

        function loadStaffGrid(filteredStaff = staff) {
            const grid = document.getElementById('staffGrid');
            const empty = document.getElementById('emptyStaff');
            if (filteredStaff.length === 0) {
                grid.style.display = 'none';
                empty.style.display = 'flex';
                return;
            }
            grid.style.display = 'grid';
            empty.style.display = 'none';
            grid.innerHTML = filteredStaff.map(s => `
                <div class="staff-card">
                    ${s.image ? `<img src="${s.image}" alt="${s.firstName} ${s.lastName}" class="staff-card-image">` : '<div class="staff-card-image" style="background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); display: flex; align-items: center; justify-content: center; font-size: 48px;"></div>'}
                    <div class="staff-card-body">
                        <div class="staff-name">${s.firstName} ${s.lastName}</div>
                        <div class="staff-role">${s.role}</div>
                        <div class="staff-dept">${s.department}</div>
                        <p style="font-size: 13px; color: var(--text-muted); margin-top: 8px;"> ${s.email}</p>
                        ${s.bio ? `<p style="font-size: 13px; color: var(--text-muted); margin-top: 8px; line-height: 1.4;">${s.bio}</p>` : ''}
                        <div class="staff-actions">
                            <button class="btn btn-sm btn-secondary" onclick="editStaff(${s.id})"> Modifica</button>
                            <button class="btn btn-sm btn-danger" onclick="deleteStaff(${s.id})"> Elimina</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        document.getElementById('btnNuovoStaff')?.addEventListener('click', () => {
            currentStaffId = null;
            staffImageData = '';
            document.getElementById('modalStaffTitle').textContent = 'Nuovo Membro';
            document.getElementById('formStaff').reset();
            document.getElementById('staffImagePreview').style.display = 'none';
            document.getElementById('staffImagePlaceholder').style.display = 'flex';
            document.getElementById('modalStaff').classList.add('active');
        });

        setupImageUpload('staffImageUpload', 'staffImageInput', 'staffImagePlaceholder', 'staffImagePreview', 'staffImagePreviewImg', 'btnRemoveStaffImage', (dataUrl) => { staffImageData = dataUrl; });

        document.getElementById('btnSalvaStaff')?.addEventListener('click', () => {
            const form = new FormData(document.getElementById('formStaff'));
            const staffData = {
                firstName: form.get('staffFirstName'),
                lastName: form.get('staffLastName'),
                role: form.get('staffRole'),
                department: form.get('staffDept'),
                email: form.get('staffEmail'),
                bio: form.get('staffBio') || '',
                image: staffImageData
            };
            if (currentStaffId) {
                const member = staff.find(s => s.id === currentStaffId);
                Object.assign(member, staffData);
            } else {
                staff.push({ id: staff.length + 1, ...staffData });
            }
            loadStaffGrid();
            document.getElementById('modalStaff').classList.remove('active');
        });

        document.getElementById('btnAnnullaStaff')?.addEventListener('click', () => document.getElementById('modalStaff').classList.remove('active'));

        function editStaff(id) {
            currentStaffId = id;
            const member = staff.find(s => s.id === id);
            document.getElementById('modalStaffTitle').textContent = 'Modifica Membro';
            const form = document.getElementById('formStaff');
            form.staffFirstName.value = member.firstName;
            form.staffLastName.value = member.lastName;
            form.staffRole.value = member.role;
            form.staffDept.value = member.department;
            form.staffEmail.value = member.email;
            form.staffBio.value = member.bio;
            staffImageData = member.image;
            if (member.image) {
                document.getElementById('staffImagePreviewImg').src = member.image;
                document.getElementById('staffImagePreview').style.display = 'block';
                document.getElementById('staffImagePlaceholder').style.display = 'none';
            } else {
                document.getElementById('staffImagePreview').style.display = 'none';
                document.getElementById('staffImagePlaceholder').style.display = 'flex';
            }
            document.getElementById('modalStaff').classList.add('active');
        }

        function deleteStaff(id) {
            if (confirm('Eliminare questo membro?')) {
                staff = staff.filter(s => s.id !== id);
                loadStaffGrid();
            }
        }

        document.getElementById('searchStaff')?.addEventListener('input', (e) => {
            const search = e.target.value.toLowerCase();
            loadStaffGrid(staff.filter(s => s.firstName.toLowerCase().includes(search) || s.lastName.toLowerCase().includes(search) || s.role.toLowerCase().includes(search) || s.email.toLowerCase().includes(search)));
        });

        document.getElementById('filterStaffDept')?.addEventListener('change', (e) => {
            const dept = e.target.value;
            loadStaffGrid(dept ? staff.filter(s => s.department === dept) : staff);
        });

        window.editStaff = editStaff;
        window.deleteStaff = deleteStaff;

        const staffMenuItem = document.querySelector('.menu-item:nth-child(7)');
        if (staffMenuItem) {
            staffMenuItem.addEventListener('click', () => {
                setTimeout(() => loadStaffGrid(), 100);
            });
        }
    </script>

</body>
</html>
